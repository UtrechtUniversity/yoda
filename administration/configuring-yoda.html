<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/yoda/assets/css/just-the-docs-default.css"> <script src="/yoda/assets/js/vendor/lunr.min.js"></script> <script src="/yoda/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/yoda/favicon.ico" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Configuring Yoda | Yoda</title> <meta name="generator" content="Jekyll v3.9.3" /> <meta property="og:title" content="Configuring Yoda" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="On this website you can find release notes and technical documentation on software design and administration tasks of Yoda" /> <meta property="og:description" content="On this website you can find release notes and technical documentation on software design and administration tasks of Yoda" /> <meta property="og:site_name" content="Yoda" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Configuring Yoda" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"On this website you can find release notes and technical documentation on software design and administration tasks of Yoda","headline":"Configuring Yoda","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/yoda/yoda.svg"}},"url":"/yoda/administration/configuring-yoda.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/yoda/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/yoda/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in Release Notes category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/yoda/release-notes/" class="nav-list-link">Release Notes</a><ul class="nav-list"><li class="nav-list-item "><a href="/yoda/release-notes/release-1.9.html" class="nav-list-link">v1.9</a></li><li class="nav-list-item "><a href="/yoda/release-notes/release-1.8.html" class="nav-list-link">v1.8</a></li><li class="nav-list-item "><a href="/yoda/release-notes/release-1.7.html" class="nav-list-link">v1.7</a></li><li class="nav-list-item "><a href="/yoda/release-notes/release-1.6.html" class="nav-list-link">v1.6</a></li><li class="nav-list-item "><a href="/yoda/release-notes/release-1.5.html" class="nav-list-link">v1.5</a></li><li class="nav-list-item "><a href="/yoda/release-notes/release-1.4.html" class="nav-list-link">v1.4</a></li><li class="nav-list-item "><a href="/yoda/release-notes/release-1.3.html" class="nav-list-link">v1.3</a></li><li class="nav-list-item "><a href="/yoda/release-notes/release-1.2.html" class="nav-list-link">v1.2</a></li><li class="nav-list-item "><a href="/yoda/release-notes/release-1.1.html" class="nav-list-link">v1.1</a></li><li class="nav-list-item "><a href="/yoda/release-notes/release-1.0.html" class="nav-list-link">v1.0</a></li><li class="nav-list-item "><a href="/yoda/release-notes/release-0.9.7.html" class="nav-list-link">v0.9.7</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in Software Design category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/yoda/design/" class="nav-list-link">Software Design</a><ul class="nav-list"><li class="nav-list-item "><a href="/yoda/design/api/" class="nav-list-link">API</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in System Overview category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/yoda/design/overview/" class="nav-list-link">System Overview</a><ul class="nav-list"><li class="nav-list-item "> <a href="/yoda/design/overview/research-space.html" class="nav-list-link">Research space</a> </li><li class="nav-list-item "> <a href="/yoda/design/overview/vault-space.html" class="nav-list-link">Vault space</a> </li><li class="nav-list-item "> <a href="/yoda/design/overview/group-manager.html" class="nav-list-link">Group manager</a> </li><li class="nav-list-item "> <a href="/yoda/design/overview/statistics.html" class="nav-list-link">Statistics module</a> </li><li class="nav-list-item "> <a href="/yoda/design/overview/deposit-space.html" class="nav-list-link">Deposit space</a> </li><li class="nav-list-item "> <a href="/yoda/design/overview/theme-packages.html" class="nav-list-link">Theme packaging</a> </li><li class="nav-list-item "> <a href="/yoda/design/overview/intake.html" class="nav-list-link">Intake module</a> </li><li class="nav-list-item "> <a href="/yoda/design/overview/data-requests.html" class="nav-list-link">Data requests module</a> </li><li class="nav-list-item "> <a href="/yoda/design/overview/authentication.html" class="nav-list-link">Authentication</a> </li><li class="nav-list-item "> <a href="/yoda/design/overview/data_package_reference.html" class="nav-list-link">Data Package Reference</a> </li><li class="nav-list-item "> <a href="/yoda/design/overview/deployment.html" class="nav-list-link">Deployment</a> </li><li class="nav-list-item "> <a href="/yoda/design/overview/external-user-service.html" class="nav-list-link">External User Service</a> </li><li class="nav-list-item "> <a href="/yoda/design/overview/yoda-moai.html" class="nav-list-link">Yoda MOAI service</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Metadata category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/yoda/design/metadata/" class="nav-list-link">Metadata</a><ul class="nav-list"><li class="nav-list-item "> <a href="/yoda/design/metadata/adr-schema-identifiers.html" class="nav-list-link">Architectural decision record schema identifier format</a> </li><li class="nav-list-item "> <a href="/yoda/design/metadata/metadata-form-json.html" class="nav-list-link">Metadata JSON schema</a> </li><li class="nav-list-item "> <a href="/yoda/design/metadata/metadata-form.html" class="nav-list-link">Metadata form implementation</a> </li><li class="nav-list-item "> <a href="/yoda/design/metadata/schema-configuration.html" class="nav-list-link">Metadata schemas</a> </li><li class="nav-list-item "> <a href="/yoda/design/metadata/metadata-vault.html" class="nav-list-link">Metadata vault</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander" aria-label="toggle links in Processes category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/yoda/design/processes/" class="nav-list-link">Processes</a><ul class="nav-list"><li class="nav-list-item "> <a href="/yoda/design/processes/async-system-execution.html" class="nav-list-link">Asynchronous and Privileged Execution</a> </li><li class="nav-list-item "> <a href="/yoda/design/processes/asynchronous-processes.html" class="nav-list-link">Asynchronous processes</a> </li><li class="nav-list-item "> <a href="/yoda/design/processes/locking-mechanism.html" class="nav-list-link">Folder Locking mechanism</a> </li><li class="nav-list-item "> <a href="/yoda/design/processes/publication-process.html" class="nav-list-link">Publication Process</a> </li><li class="nav-list-item "> <a href="/yoda/design/processes/revisions.html" class="nav-list-link">Revision management</a> </li><li class="nav-list-item "> <a href="/yoda/design/processes/vault-process.html" class="nav-list-link">To vault process in research module</a> </li></ul></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander" aria-label="toggle links in Administration Tasks category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/yoda/administration/" class="nav-list-link">Administration Tasks</a><ul class="nav-list"><li class="nav-list-item active"><a href="/yoda/administration/configuring-yoda.html" class="nav-list-link active">Configuring Yoda</a></li><li class="nav-list-item "><a href="/yoda/administration/deploying-yoda.html" class="nav-list-link">Deploying Yoda</a></li><li class="nav-list-item "><a href="/yoda/administration/hotfixing-ruleset.html" class="nav-list-link">Hotfixing ruleset</a></li><li class="nav-list-item "><a href="/yoda/administration/local-ruleset-patch.html" class="nav-list-link">Local ruleset patches</a></li><li class="nav-list-item "><a href="/yoda/administration/installing-licenses.html" class="nav-list-link">Installing Licenses</a></li><li class="nav-list-item "><a href="/yoda/administration/installing-terms.html" class="nav-list-link">Installing Terms & Conditions</a></li><li class="nav-list-item "><a href="/yoda/administration/installing-preservable-file-formats.html" class="nav-list-link">Installing lists of preservable file formats</a></li><li class="nav-list-item "><a href="/yoda/administration/installing-metadata-schemas.html" class="nav-list-link">Installing metadata schemas</a></li><li class="nav-list-item "><a href="/yoda/administration/local-postfix-mta.html" class="nav-list-link">Local Postfix MTA</a></li><li class="nav-list-item "><a href="/yoda/administration/installing-datarequest-module.html" class="nav-list-link">Installing datarequest module</a></li><li class="nav-list-item "><a href="/yoda/administration/upgrading-metadata-schemas.html" class="nav-list-link">Upgrading metadata schemas</a></li><li class="nav-list-item "><a href="/yoda/administration/troubleshooting-publication.html" class="nav-list-link">Troubleshooting publication</a></li><li class="nav-list-item "><a href="/yoda/administration/using-python-irodsclient.html" class="nav-list-link">Using the python-irodsclient API</a></li><li class="nav-list-item "><a href="/yoda/administration/troubleshooting-email.html" class="nav-list-link">Troubleshooting email</a></li><li class="nav-list-item "><a href="/yoda/administration/configuring-openidc.html" class="nav-list-link">Configuring OIDC</a></li><li class="nav-list-item "><a href="/yoda/administration/troubleshooting-replication-revisions.html" class="nav-list-link">Troubleshooting replication and revision creation</a></li><li class="nav-list-item "><a href="/yoda/administration/configuring-cleanup-temporary-files.html" class="nav-list-link">Configuring cleanup functionality temporary files</a></li><li class="nav-list-item "><a href="/yoda/administration/configuring-data-access-passwords.html" class="nav-list-link">Configuring Data Access Passwords</a></li><li class="nav-list-item "><a href="/yoda/administration/restore-collection.html" class="nav-list-link">Restore collection</a></li><li class="nav-list-item "><a href="/yoda/administration/setting-job-flags.html" class="nav-list-link">Setting job flags</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in Development category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/yoda/development/" class="nav-list-link">Development</a><ul class="nav-list"><li class="nav-list-item "><a href="/yoda/development/setting-up-development-environment.html" class="nav-list-link">Setting up development environment</a></li><li class="nav-list-item "><a href="/yoda/development/running-api-ui-tests.html" class="nav-list-link">Running API and UI tests</a></li><li class="nav-list-item "><a href="/yoda/development/yodadrive-development-environment.html" class="nav-list-link">Setting up YodaDrive development environment</a></li><li class="nav-list-item "><a href="/yoda/development/mock_tape_archive.html" class="nav-list-link">Mock tape archive</a></li><li class="nav-list-item "><a href="/yoda/development/development-tips.html" class="nav-list-link">Development tips</a></li><li class="nav-list-item "><a href="/yoda/development/wall-of-fame.html" class="nav-list-link">Wall of Fame</a></li></ul></li></ul> </nav> <footer class="site-footer">&copy; 2017-2023 <a href="https://www.uu.nl/" title="Utrecht University website">Utrecht University</a></footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Yoda" aria-label="Search Yoda" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/UtrechtUniversity/yoda" class="site-button" > Yoda on GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/yoda/administration/">Administration Tasks</a></li> <li class="breadcrumb-nav-list-item"><span>Configuring Yoda</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="configuring-yoda"> <a href="#configuring-yoda" class="anchor-heading" aria-labelledby="configuring-yoda"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configuring Yoda </h1> <p>Instructions on how to configure a (new) Yoda instance.</p> <h2 id="1-create-new-environment"> <a href="#1-create-new-environment" class="anchor-heading" aria-labelledby="1-create-new-environment"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. Create new environment </h2> <p>This first step is optional. You can configure a (new) Yoda instance in an existing environment or create a new environment. A <code class="language-plaintext highlighter-rouge">development</code> environment is available with two example instances.</p> <p>To create a new environment make a new directory under <code class="language-plaintext highlighter-rouge">environments</code>. For example a production environment:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir </span>environments/production
</code></pre></div></div> <p>We call our new instance ‘yoda’, so create a new instance directory:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir </span>environments/production/yoda
</code></pre></div></div> <p>In this new instance directory two directories are needed, on for the Yoda instance variables (group_vars) and one for host specific variables (host_vars).</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir </span>environments/production/yoda/group_vars
<span class="nb">mkdir </span>environments/production/yoda/host_vars
</code></pre></div></div> <h2 id="2-add-hosts-of-new-yoda-instance"> <a href="#2-add-hosts-of-new-yoda-instance" class="anchor-heading" aria-labelledby="2-add-hosts-of-new-yoda-instance"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. Add hosts of new Yoda instance </h2> <p>Hosts of a Yoda instance are defined in the <a href="https://docs.ansible.com/ansible/latest/intro_inventory.html">Ansible inventory</a> file ‘hosts’. For the development instance ‘full’ this inventory can be found in <code class="language-plaintext highlighter-rouge">environments/development/full/hosts</code>. In the inventory the hosts of an instance are defined, their functional roles and to which groups they belong.</p> <p>Example configuration defining the and functional roles of an instance called ‘yoda’:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>yoda:children]
yoda_portal
yoda_database
yoda_icat
yoda_resource
yoda_public
yoda_eus

<span class="o">[</span>yoda_portal]
host1.yoda.test

<span class="c"># leave this out when using an existing database for ICAT</span>
<span class="o">[</span>yoda_database]
host1.yoda.test

<span class="o">[</span>yoda_icat]
host1.yoda.test

<span class="o">[</span>yoda_resource]
host2.yoda.test

<span class="o">[</span>yoda_public]
host3.yoda.test

<span class="o">[</span>yoda_eus]
host4.yoda.test
</code></pre></div></div> <p>Add the new functional roles of the instance to the corresponding groups. For example:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>portals:children]
yoda_portal

<span class="c"># leave this out when using an existing database for ICAT</span>
<span class="o">[</span>databases:children]
yoda_database

<span class="o">[</span>icats:children]
yoda_icat

<span class="o">[</span>resources:children]
yoda_resource

<span class="o">[</span>publics:children]
yoda_public

<span class="o">[</span>eus:children]
yoda_eus
</code></pre></div></div> <p>It is possible to deploy davrods to a separate host by adding a davrods host and group:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>yoda:children]
yoda_portal
yoda_davrods
yoda_database
yoda_icat
yoda_resource
yoda_public
yoda_eus

<span class="o">[</span>yoda_davrods]
host5.yoda.test

<span class="o">[</span>davrods:children]
yoda_davrods
</code></pre></div></div> <p>Last step to add the hosts of a new Yoda instance is to create configuration files for every new host. In development environment these configuration files are placed in <code class="language-plaintext highlighter-rouge">environments/development/hosts</code>. For example, for host ‘host1.yoda.test’ a configuration file is created:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">touch </span>environments/development/host_vars/host1.yoda.test
</code></pre></div></div> <p>And place the basic host configuration in the new file:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">---</span>
ansible_host: host1.yoda.test
</code></pre></div></div> <h2 id="3-configure-new-yoda-instance"> <a href="#3-configure-new-yoda-instance" class="anchor-heading" aria-labelledby="3-configure-new-yoda-instance"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3. Configure (new) Yoda instance </h2> <p>To configure a (new) Yoda instance we have to edit the instance configuration in the Yoda instance variables directory (group_vars). In case of a new Yoda instance we can copy a configuration of a full development (<code class="language-plaintext highlighter-rouge">environments/development/full/</code>) instance as base. The configuration is split in several parts. Below an overview of these parts and the configuration options available.</p> <h3 id="ansible-configuration"> <a href="#ansible-configuration" class="anchor-heading" aria-labelledby="ansible-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Ansible configuration </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Variable</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>ansible_user</td> <td>Administrative user on instance for Ansible</td> </tr> <tr> <td>ansible_ssh_private_key_file</td> <td>Path to private key file of administrative user</td> </tr> <tr> <td>repo_only</td> <td>Only download packages from repos</td> </tr> <tr> <td>centos_extras_repository</td> <td>Name of the CentOS extras repository</td> </tr> <tr> <td>centos_sclo_rh_repository</td> <td>Name of the CentOS SCLO-RH repository</td> </tr> </tbody> </table></div> <p>Note: if one of these variables are different for a host then define them in the corresponding host specific variables file (host_vars).</p> <h3 id="yoda-configuration"> <a href="#yoda-configuration" class="anchor-heading" aria-labelledby="yoda-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Yoda configuration </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Variable</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>instance</td> <td>Name of Yoda instance, as defined in hosts file</td> </tr> <tr> <td>yoda_version</td> <td>Yoda version. Use a git branch (e.g. release-1.8) or a tag (e.g. v1.8.5)</td> </tr> <tr> <td>yoda_environment</td> <td>Yoda environment: development, testing, acceptance or production</td> </tr> <tr> <td>yoda_portal_fqdn</td> <td>Yoda Portal fully qualified domain name (FQDN)</td> </tr> <tr> <td>yoda_davrods_fqdn</td> <td>Yoda Davrods WebDAV fully qualified domain name (FQDN)</td> </tr> <tr> <td>yoda_davrods_anonymous_fqdn</td> <td>Yoda Davrods anonymous WebDAV fully qualified domain name (FQDN)</td> </tr> <tr> <td>yoda_davrods_logo_path</td> <td>Path of the DavRODS logo on the portal. Defaults to the themed logo.</td> </tr> <tr> <td>yoda_davrods_logo_link</td> <td>URL that the DavRODS logo is linked to (default: https://www.uu.nl)</td> </tr> <tr> <td>yoda_enable_httpd</td> <td>Whether to enable the httpd service (boolean, default value: true). Set to false if manual actions are needed before starting the web server (e.g. mounting encrypted volumes)</td> </tr> <tr> <td>httpd_log_forwarded_for</td> <td>Whether to log X-Forwarded-For headers in Apache logs (boolean, default value: false). This logs source IP addresses of requests if requests to the Yoda web portal and/or WebDAV interface are routed via a load balancer.</td> </tr> <tr> <td>httpd_log_user_agent</td> <td>Whether to log the user agent of browsers and WebDAV clients in the Apache logs (boolean, default value: false)</td> </tr> <tr> <td>tcp_keepalive_time</td> <td>IPv4 TCP keepalives: time until first keepalive (kernel parameter). Can be useful to tune in order to prevent timeouts on long transfers.</td> </tr> <tr> <td>tcp_keepalive_intvl</td> <td>IPv4 TCP keepalives: time between keepalives (kernel parameter). Can be useful to tune in order to prevent timeouts on long transfers.</td> </tr> <tr> <td>yoda_theme</td> <td>The theme to use for the Yoda Portal. See also <a href="/yoda/design/overview/theme-packages.html">the theme documentation</a>. By default, Yoda uses the UU theme.</td> </tr> <tr> <td>yoda_theme_path</td> <td>Path where themes for the Yoda Portal are retrieved from. See <a href="/yoda/design/overview/theme-packages.html">the theme documentation</a> for more information.</td> </tr> </tbody> </table></div> <h3 id="irods-configuration"> <a href="#irods-configuration" class="anchor-heading" aria-labelledby="irods-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> iRODS configuration </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Variable</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>irods_admin</td> <td>iRODS admin username</td> </tr> <tr> <td>irods_password</td> <td>iRODS admin password</td> </tr> <tr> <td>irods_database_user</td> <td>The iRODS database username</td> </tr> <tr> <td>irods_database_password</td> <td>The password for the iRODS database username</td> </tr> <tr> <td>irods_database_enable_yoda_indexes</td> <td>Enable indexes to speed up Yoda search operations (default: false). This is mainly useful for medium-sized and large environments (millions of data objects or more). Please note that the indexes can take up a significant amount of diskspace (rough estimate: 10-30% increase in database size). They will be created asynchronously. This can take some time on existing environments with a significant amount of data, and temporarily decrease performance.</td> </tr> <tr> <td>irods_zone</td> <td>The name of the iRODS Zone</td> </tr> <tr> <td>irods_icat_fqdn</td> <td>iRODS iCAT fully qualified domain name (FQDN)</td> </tr> <tr> <td>irods_database_fqdn</td> <td>iRODS database fully qualified domain name (FQDN)</td> </tr> <tr> <td>irods_resource_fqdn</td> <td>iRODS resource fully qualified domain name (FQDN). Don’t define this variable if you have multiple resource servers.</td> </tr> <tr> <td>irods_default_resc</td> <td>iRODS default resource name</td> </tr> <tr> <td>irods_resc_trigger_pol</td> <td>List of text patterns for matching non-primary resources where changes also need to trigger policies (e.g. asynchronous replication). Example: [“^testResc$”,”^myResc$”]</td> </tr> <tr> <td>irods_ssl_verify_server</td> <td>Verify TLS certificate, use ‘cert’ for acceptance and production</td> </tr> <tr> <td>irods_resources</td> <td>Definition of iRODS resources of this Yoda instance</td> </tr> <tr> <td>irods_service_type</td> <td>Possible values: ‘sysv’ (System V) or ‘systemd’</td> </tr> <tr> <td>irods_max_open_files</td> <td>Maximum number of open files for iRODS service (only effective when irods_service_type is set to ‘systemd’)</td> </tr> <tr> <td>irods_enable_service</td> <td>Whether to enable the iRODS service. Set to false if manual actions are needed before starting iRODS, e.g. mounting encrypted volumes (only effective when irods_service_type is set to ‘systemd’)</td> </tr> <tr> <td>irods_rum_job_enabled</td> <td>Whether to enable the daily RUM job for removing unused metadata entries (default: true)</td> </tr> <tr> <td>irods_rum_job_hour</td> <td>Time to run RUM job - hour (default: 20)</td> </tr> <tr> <td>irods_rum_job_minute</td> <td>Time to run RUM job - minute (default: 0)</td> </tr> </tbody> </table></div> <h3 id="s3-configuration---for-irods-s3-resource-plugin-and-s3cmd-utilities"> <a href="#s3-configuration---for-irods-s3-resource-plugin-and-s3cmd-utilities" class="anchor-heading" aria-labelledby="s3-configuration---for-irods-s3-resource-plugin-and-s3cmd-utilities"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> S3 configuration - for iRODS S3 resource plugin and s3cmd utilities </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Variable</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>enable_s3_resource</td> <td>Enable <a href="https://github.com/irods/irods_resource_plugin_s3">iRODS S3 Resource Plugin</a>. Default: false</td> </tr> <tr> <td>s3_access_key</td> <td>S3 access key of S3 buckets (used by s3cmd, and optionally by S3 resource plugin, if S3 resource context points to .s3auth file)</td> </tr> <tr> <td>s3_secret_key</td> <td>S3 secret key of S3 buckets (used by s3cmd, and optionally by S3 resource plugin, if S3 resource context points to .s3auth file)</td> </tr> <tr> <td>s3_hostname</td> <td>S3 server hostname (used by s3cmd; the hostname used by the S3 resource plugin is configured in the S3 resource contexts instead)</td> </tr> </tbody> </table></div> <h3 id="research-module-configuration"> <a href="#research-module-configuration" class="anchor-heading" aria-labelledby="research-module-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Research module configuration </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Variable</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>default_yoda_schema</td> <td>Default Yoda XML scheme: default-0 or default-1</td> </tr> <tr> <td>enable_revisions</td> <td>Enable revisions: yes (1) or no (0)</td> </tr> <tr> <td>enable_revision_cleanup</td> <td>Enable cleanup job for removing old revisions (true/false, default: true)</td> </tr> <tr> <td>enable_async_replication</td> <td>Enable asynchronous replication cronjob: yes (1) or no (0)</td> </tr> <tr> <td>revision_strategy</td> <td>Revision strategy: A, B, J or Simple</td> </tr> <tr> <td>yoda_random_id_length</td> <td>Length of random ID to add to persistent identifier</td> </tr> <tr> <td>yoda_prefix</td> <td>Prefix for internal portion of persistent identifier</td> </tr> <tr> <td>update_rulesets</td> <td>Update already installed rulesets with git</td> </tr> <tr> <td>override_resc_install_rulesets</td> <td>Install rulesets on server even if it is a resource server (default: false). This override parameter can be used on resource servers that have an additional role, e.g. DavRODS server</td> </tr> <tr> <td>update_schemas</td> <td>Update already installed schemas, formelements and stylesheets: yes (1) or no (0)</td> </tr> <tr> <td>credential_files</td> <td>Location of Yoda credentials files</td> </tr> <tr> <td>temporary_files</td> <td>List of temporary files for cleanup functionality</td> </tr> <tr> <td>metadata_schemas</td> <td>List of metadata schemas to install on the system</td> </tr> </tbody> </table></div> <h3 id="deposit-module-configuration"> <a href="#deposit-module-configuration" class="anchor-heading" aria-labelledby="deposit-module-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Deposit module configuration </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Variable</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>enable_deposit</td> <td>Enable deposit module</td> </tr> </tbody> </table></div> <h3 id="intake-module-configuration"> <a href="#intake-module-configuration" class="anchor-heading" aria-labelledby="intake-module-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Intake module configuration </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Variable</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>enable_intake</td> <td>Enable intake module</td> </tr> <tr> <td>intake_groups</td> <td>List of intake groups (without the “grp-intake-“ prefix)</td> </tr> <tr> <td>intake_extended_timeout</td> <td>If the intake module is enabled, portal iRODS session timeouts and portal VHost timeouts will be changed to this value (in seconds), in order to be able to handle long synchronous operations, such as intake scans (default: 1800)</td> </tr> </tbody> </table></div> <h3 id="datarequest-module-configuration"> <a href="#datarequest-module-configuration" class="anchor-heading" aria-labelledby="datarequest-module-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Datarequest module configuration </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Variable</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>enable_datarequest</td> <td>Enable datarequest module</td> </tr> <tr> <td>datarequest_help_contact_name</td> <td>Help contact name</td> </tr> <tr> <td>datarequest_help_contact_email</td> <td>Help contact email address</td> </tr> </tbody> </table></div> <h3 id="opensearch-configuration"> <a href="#opensearch-configuration" class="anchor-heading" aria-labelledby="opensearch-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> OpenSearch configuration </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Variable</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>enable_open_search</td> <td>Enable OpenSearch and indexing plugin</td> </tr> <tr> <td>opensearch_server</td> <td>FQDN of the OpenSearch server (typically the provider)</td> </tr> </tbody> </table></div> <h3 id="yoda-notifications-configuration"> <a href="#yoda-notifications-configuration" class="anchor-heading" aria-labelledby="yoda-notifications-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Yoda notifications configuration </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Variable</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>send_notifications</td> <td>Enable notifications: yes (1) or no (0)</td> </tr> <tr> <td>notifications_sender_email</td> <td>Notifiations sender email address</td> </tr> <tr> <td>notifications_reply_to</td> <td>Notifiations Reply-To email address</td> </tr> </tbody> </table></div> <h3 id="yoda-internal-smtp-settings-configuration"> <a href="#yoda-internal-smtp-settings-configuration" class="anchor-heading" aria-labelledby="yoda-internal-smtp-settings-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Yoda internal SMTP settings configuration </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Variable</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>smtp_server</td> <td>SMTP server to send mail to</td> </tr> <tr> <td>smtp_username</td> <td>SMTP server username</td> </tr> <tr> <td>smtp_password</td> <td>SMTP server password</td> </tr> <tr> <td>smtp_auth</td> <td>Whether to use SMTP authentication (true/false, default: true)</td> </tr> <tr> <td>smtp_starttls</td> <td>Whether to force StartTLS on non-SMTP connections (true/false, default: true)</td> </tr> </tbody> </table></div> <h3 id="postgresql-database-configuration"> <a href="#postgresql-database-configuration" class="anchor-heading" aria-labelledby="postgresql-database-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> PostgreSQL database configuration </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Variable</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>pgsql_version</td> <td>PostgreSQL version (default: 11)</td> </tr> <tr> <td>postgresql_max_connections</td> <td>Maximum number of database connections (default: 100)</td> </tr> <tr> <td>postgresql_shared_buffers</td> <td>Amount of memory database should use for shared buffers. Rule of thumb: set to 25% of memory on dedicated database server; on a shared server, it should probably be lower. Default value: 32 MB.</td> </tr> <tr> <td>postgresql_work_mem</td> <td>Maximum amount of worker memory. Rule of thumb: increasing worker memory can help with improving performance, but it is necessary to ensure that sufficient memory is available, considering the maximum number of database connections. Default value: 1 MB.</td> </tr> <tr> <td>postgresql_maintenance_work_mem</td> <td>Maximum amount of memory for maintenance processes, such as VACUUM. Default value: 16 MB.</td> </tr> <tr> <td>postgresql_effective_cache_size</td> <td>Tells the query planner how much memory it can expect to be available for disk caching for the database. Rule of thumb: set to approximately 50-75% on dedicated database server. Default value: 128 MB.</td> </tr> <tr> <td>postgresql_random_page_cost</td> <td>Tells the query planner about the relative cost of random access versus sequential access. You could use a tool like fio to get an estimate, or use a ballpark estimate based on the type of storage of the database volume (e.g. 1.0 for SSD-based storage). Default value is 4.0.</td> </tr> <tr> <td>postgresql_log_line_prefix:</td> <td>Format of log message prefix in the PostgreSQL log, for adding timestamps etc. to log messages. The default value adds a timestamp and process number, which is sufficient for most purposes. It might be useful to log additional information in specific situations, such as when troubleshooting database issues.</td> </tr> <tr> <td>postgresql_log_min_duration_statement</td> <td>Minimum number of milliseconds for slow query logging (default: -1 / disabled)</td> </tr> <tr> <td>postgresql_log_autovacuum_min_duration</td> <td>Minimum number of milliseconds for logging slow autovacuum actions (default: -1 / disabled)</td> </tr> <tr> <td>postgresql_timezone</td> <td>Timezone that PostgreSQL uses. Defaults to Europe/Amsterdam.</td> </tr> </tbody> </table></div> <h3 id="pgbouncer-configuration"> <a href="#pgbouncer-configuration" class="anchor-heading" aria-labelledby="pgbouncer-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> PgBouncer configuration </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Variable</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>enable_pgbouncer</td> <td>Whether to enable PgBouncer (default: false)</td> </tr> <tr> <td>pgbouncer_pool_mode</td> <td>Specifies when a server connection can be reused by other clients (default: session)</td> </tr> <tr> <td>pgbouncer_max_client_conn</td> <td>Maximum number of client connections allowed (default: 200)</td> </tr> <tr> <td>pgbouncer_default_pool_size</td> <td>How many server connections to allow per user/database pair (default: 50)</td> </tr> <tr> <td>pgbouncer_reserve_pool_size</td> <td>How many additional connections to allow to a pool (default: 25)</td> </tr> <tr> <td>pgbouncer_reserve_pool_timeout</td> <td>If a client has not been serviced in this time, use additional connections from the reserve pool (default: 2)</td> </tr> </tbody> </table></div> <h3 id="postfix-configuration"> <a href="#postfix-configuration" class="anchor-heading" aria-labelledby="postfix-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Postfix configuration </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Variable</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>enable_postfix</td> <td>Whether to enable the Postfix local MTA (default: false)</td> </tr> <tr> <td>postfix_myhostname</td> <td>Hostname of server where Postfix will be installed (compulsory parameter if Postfix is enabled)</td> </tr> <tr> <td>postfix_relayhost</td> <td>Relay host, the server that Postfix should send emails to (compulsory parameter if Postfix is enabled)</td> </tr> <tr> <td>postfix_relayhost_port</td> <td>Port of relay host (default: 587)</td> </tr> <tr> <td>postfix_relayhost_username</td> <td>User name for authentication on relay host (compulsory parameter if Postfix is enabled)</td> </tr> <tr> <td>postfix_relayhost_password</td> <td>Password for authentication on relay host (compulsory parameter if Postfix is enabled)</td> </tr> <tr> <td>postfix_smtp_enable_tls</td> <td>Whether to enable TLS on connections to relay host. This also enables authentication on connections to the relay host (default: true)</td> </tr> <tr> <td>postfix_enable_debugging</td> <td>This enables additional logging on connections to the relay host. Useful for troubleshooting. (default: false)</td> </tr> <tr> <td>postfix_myorigin</td> <td>Sets origin domain for emails sent on the system. Defaults to the postfix_myhostname domain.</td> </tr> <tr> <td>postfix_inet_protocols</td> <td>Refers to Postfix inet_protocols setting. Can be useful for running Postfix in IPv4 only mode, if no IPv6 connectivity is available (default: “all”)</td> </tr> <tr> <td>postfix_canonical_map</td> <td>An optional dictionary of rewrite rules for email addresses. See <a href="/yoda/administration/local-postfix-mta.html">the local Postfix MTA page</a> for further information.</td> </tr> </tbody> </table></div> <h3 id="datacite-configuration"> <a href="#datacite-configuration" class="anchor-heading" aria-labelledby="datacite-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> DataCite Configuration </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Variable</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>datacite_username</td> <td>DataCite username</td> </tr> <tr> <td>datacite_password</td> <td>DataCite password</td> </tr> <tr> <td>datacite_prefix</td> <td>DataCite DOI prefix</td> </tr> <tr> <td>datacite_rest_api_url</td> <td>DataCite REST API URL</td> </tr> </tbody> </table></div> <h3 id="epic-pid-configuration"> <a href="#epic-pid-configuration" class="anchor-heading" aria-labelledby="epic-pid-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> EPIC PID Configuration </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Variable</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>epic_url</td> <td>EPIC PID server URI (undefined disables EPIC PID)</td> </tr> <tr> <td>epic_handle_prefix</td> <td>EPIC PID prefix</td> </tr> <tr> <td>epic_key</td> <td>EPIC PID key (base64 encoded)</td> </tr> <tr> <td>epic_cert</td> <td>EPIC PID cert (base64 encoded)</td> </tr> </tbody> </table></div> <h3 id="data-access-tokens-configuration"> <a href="#data-access-tokens-configuration" class="anchor-heading" aria-labelledby="data-access-tokens-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Data Access Tokens configuration </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Variable</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>enable_tokens</td> <td>Boolean indicating if Data Access Tokens for webDAV and iCommands are enabled. Must be <code class="language-plaintext highlighter-rouge">true</code> or <code class="language-plaintext highlighter-rouge">false</code></td> </tr> <tr> <td>token_database</td> <td>Location of the database that contain the tokens</td> </tr> <tr> <td>token_database_password</td> <td>Token database password</td> </tr> <tr> <td>token_length</td> <td>Length of data access tokens</td> </tr> <tr> <td>token_lifetime</td> <td>Lifetime of data access tokens (in hours)</td> </tr> <tr> <td>token_expiration_notification</td> <td>Send notification before token expiration (in hours)</td> </tr> <tr> <td>enable_radius_fallback</td> <td>Fall back on RADIUS authentication if token authentication fails (default: false). Only enables RADIUS fallback if <code class="language-plaintext highlighter-rouge">enable_tokens</code> is set to <code class="language-plaintext highlighter-rouge">true</code>.This is a legacy parameter that will be removed in a future version of Yoda.</td> </tr> </tbody> </table></div> <h3 id="public-host-configuration"> <a href="#public-host-configuration" class="anchor-heading" aria-labelledby="public-host-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Public host configuration </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Variable</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>yoda_public_host</td> <td>Yoda public host</td> </tr> <tr> <td>yoda_public_fqdn</td> <td>Yoda public fully qualified domain name (FQDN)</td> </tr> <tr> <td>upload_priv_key</td> <td>Yoda public upload private key (base64 encoded)</td> </tr> <tr> <td>upload_pub_key</td> <td>Yoda public upload public key (base64 encoded)</td> </tr> </tbody> </table></div> <h3 id="external-user-service-configuration"> <a href="#external-user-service-configuration" class="anchor-heading" aria-labelledby="external-user-service-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> External user service configuration </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Variable</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>yoda_eus_fqdn</td> <td>Yoda External User Service fully qualified domain name (FQDN)</td> </tr> <tr> <td>eus_api_fqdn</td> <td>External User Service API fully qualified domain name (FQDN)</td> </tr> <tr> <td>eus_api_port</td> <td>External User Service API port</td> </tr> <tr> <td>eus_api_secret</td> <td>External User Service API secret</td> </tr> <tr> <td>eus_db_password</td> <td>External User Service database password</td> </tr> <tr> <td>eus_smtp_host</td> <td>External User Service SMTP host</td> </tr> <tr> <td>eus_smtp_port</td> <td>External User Service SMTP port</td> </tr> <tr> <td>eus_smtp_user</td> <td>External User Service SMTP user</td> </tr> <tr> <td>eus_smtp_password</td> <td>External User Service SMTP password</td> </tr> <tr> <td>eus_smtp_auth</td> <td>External User Service SMTP authentication (true/false, default: true)</td> </tr> <tr> <td>eus_smtp_security</td> <td>External User Service SMTP encryption (tls/ssl/false, default: tls)</td> </tr> <tr> <td>eus_smtp_from_address</td> <td>External User Service from address</td> </tr> <tr> <td>eus_smtp_replyto_address</td> <td>External User Service replyto address</td> </tr> <tr> <td>eus_mail_template</td> <td>External User Service mail template</td> </tr> </tbody> </table></div> <h3 id="openid-connect-oidc-configuration"> <a href="#openid-connect-oidc-configuration" class="anchor-heading" aria-labelledby="openid-connect-oidc-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> OpenID Connect (OIDC) configuration </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Variable</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>oidc_active</td> <td>Boolean indicating whether OpenId Connect with the following parameters is enabled of not. Must be <code class="language-plaintext highlighter-rouge">true</code> or <code class="language-plaintext highlighter-rouge">false</code></td> </tr> <tr> <td>oidc_domains</td> <td>Domains that should use OIDC (list). If this parameter is set, the first domain in the list is also used to generate the user name placeholder on the portal gate and login pages.</td> </tr> <tr> <td>oidc_client_id</td> <td>OIDC Client Id</td> </tr> <tr> <td>oidc_client_secret</td> <td>OIDC Client Secret/Password</td> </tr> <tr> <td>oidc_callback_url</td> <td>OIDC Callback url</td> </tr> <tr> <td>oidc_auth_base_uri</td> <td>OIDC Authorization URI without parameters</td> </tr> <tr> <td>oidc_login_hint</td> <td>Boolean indicating whether login hint should be added to Authorization URI (default: True)</td> </tr> <tr> <td>oidc_token_uri</td> <td>OIDC Token URI</td> </tr> <tr> <td>oidc_userinfo_uri</td> <td>OIDC Userinfo URI</td> </tr> <tr> <td>oidc_scopes</td> <td>OIDC Scopes</td> </tr> <tr> <td>oidc_acr_values</td> <td>OIDC Authentication Context Class Reference Values</td> </tr> <tr> <td>oidc_email_field</td> <td>The identifier of the JSON field in the <code class="language-plaintext highlighter-rouge">id_token</code> containing the email address. Default: <code class="language-plaintext highlighter-rouge">email</code> the email address (default: email)</td> </tr> <tr> <td>oidc_jwks_uri</td> <td>The url where the JWKS can be found (Java web key sets)</td> </tr> <tr> <td>oidc_jwt_issuer</td> <td>The issuer of the JWT tokens (‘iss’ value in JWT, for verification)</td> </tr> <tr> <td>oidc_req_exp</td> <td>Check that exp (expiration) claim is present</td> </tr> <tr> <td>oidc_req_iat</td> <td>Check that iat (issued at) claim is present</td> </tr> <tr> <td>oidc_req_nbf</td> <td>Check that nbf (not before) claim is present</td> </tr> <tr> <td>oidc_verify_aud</td> <td>Check that aud (audience) claim matches audience</td> </tr> <tr> <td>oidc_verify_iat</td> <td>Check that iat (issued at) claim value is an integer</td> </tr> <tr> <td>oidc_verify_exp</td> <td>Check that exp (expiration) claim value is OK</td> </tr> <tr> <td>oidc_verify_iss</td> <td>Check that iss (issue) claim is as expected</td> </tr> </tbody> </table></div> <h3 id="mailpit-configuration"> <a href="#mailpit-configuration" class="anchor-heading" aria-labelledby="mailpit-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Mailpit configuration </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Variable</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>enable_mailpit</td> <td>Enable <a href="https://github.com/axllent/mailpit">Mailpit</a> for email testing. Should only be enabled on local development environments for security reasons. Mailpit and Postfix shouldn’t be enabled simultaneously. Default: false</td> </tr> <tr> <td>mailpit_version</td> <td>Mailpit version to install</td> </tr> <tr> <td>mailpit_max_messages</td> <td>Maximum number of messages to store (default: 10000)</td> </tr> <tr> <td>mailpit_smtp_bind_address</td> <td>Address to bind on for SMTP interface (default: 0.0.0.0)</td> </tr> <tr> <td>mailpit_smtp_port</td> <td>TCP port for SMTP interface (default: 25)</td> </tr> </tbody> </table></div> <h3 id="tooling"> <a href="#tooling" class="anchor-heading" aria-labelledby="tooling"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Tooling </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Variable</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>enable_irods_consistency_check</td> <td>Install iRODS consistency checker tool (ichk)</td> </tr> <tr> <td>irods_consistency_check_version</td> <td>iRODS consistency checker (ichk) version</td> </tr> <tr> <td>enable_icat_database_checker</td> <td>Install iCAT database checker</td> </tr> <tr> <td>icat_database_checker_version</td> <td>iCAT database checker version</td> </tr> </tbody> </table></div> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0">Licensed under <a href="https://github.com/UtrechtUniversity/yoda/blob/development/LICENSE">GPLv3</a>.</p> <div class="d-flex mt-2"> <p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/UtrechtUniversity/yoda/tree/development/docs/administration/configuring-yoda.md" id="edit-this-page">Edit this page on GitHub.</a> </p> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
