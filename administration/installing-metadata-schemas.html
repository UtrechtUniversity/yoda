<!DOCTYPE html>
<html lang="en">
    <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <link rel="icon" href="/yoda/assets/images/favicon.ico">

  <title>Installing metadata schemas</title>

  <link rel='stylesheet' id='bootstrap-css'  href='//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css' type='text/css' media='all' />
  <link rel="stylesheet" href="/yoda/assets/css/style.css" type="text/css" media="screen" />
  <link rel="stylesheet" href="/yoda/assets/css/custom.css" type="text/css" media="screen" />
  <link rel="stylesheet" href="/yoda/assets/css/print.css" type="text/css" media="print" />
</head>

    <body data-rsssl="1" class="page-template-default page page-id-6 page-parent" data-spy="scroll" data-target="#sidebarnav">
        <div id="page">

            <div id="brandbar" class="affix-top">
    <div class="container">
        <div class="row">
            <div class="col-sm-4 col-xs-8 logodiv">
                <button type="button" class="navbar-toggle hidden-print" data-toggle="collapse" data-target="#main-menu-collapse">
                    <span class="sr-only">Navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a href="https://www.uu.nl/en">
                    <img src="/yoda/assets/images/uu-logo.svg" alt="Logo Utrecht University">
                </a>

                <div class="visible-print-block">
                    <h1>YODA</h1>
                </div>
            </div>

            <div class="col-sm-6 col-xs-4 hidden-print" role="search">
                <!--
                <div class="pull-right">
                    <form method="get" id="searchform" action="https://yoda.sites.uu.nl">
                        <div class="search-wrapper">
                            <label class="screen-reader-text" for="s">'</label>
                            <input type="text" class="searchfield" value="" name="s" id="s" placeholder="Search the Site...">
                            <input type="submit" id="searchsubmit" class="searchbutton" value="">
                        </div>
                    </form>
                </div>
                -->
            </div>
        </div>
    </div>
</div>
<header id="masthead" class="header hidden-print">
    <div class="container">
        <h1>
            <a href="/yoda" rel="home" title="YODA">
                YODA
            </a>
        </h1>
    </div>
</header>

<a class="skip-link sr-only" href="#content">Skip to content</a>

<!-- MAIN MENU -->
<nav id="#access" class="navbar navbar-default navbar-inverse">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="container">
        <div class="navbar-header"></div>
        <div id="main-menu-collapse" class="collapse navbar-collapse">
            <ul id="menu-hoofdmenu" class="nav navbar-nav">
                
                <li class="first-item menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                    
                    <a title="Release notes" href="/yoda/release-notes/index.html">Release notes</a>
                    
                </li>
                
                <li class="first-item menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                    
                    <a title="Administration" href="/yoda/administration/index.html">Administration</a>
                    
                </li>
                
                <li class="first-item menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                    
                    <a title="Development" href="/yoda/development/index.html">Development</a>
                    
                </li>
                
                <li class="first-item menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                    
                    <a title="Software design" href="/yoda/design/index.html">Software design</a>
                    
                </li>
                
            </ul>
        </div>
    </div>
</nav>
<!-- /MAIN MENU -->


            <div id="content" class="two-col">
                <header class="article-header article-header-main">
                    <div class="header-image hidden-print">

                        
                        <div class="breadcrumbs" xmlns:v="https://rdf.data-vocabulary.org/#">
                            <div class="container">
							<span property="itemListElement" typeof="ListItem">
								<span property="name">YODA</span>
								<meta property="position" content="1">
							</span>
                            </div>
                        </div>
                        

                        <img src="/yoda/assets/images/header.jpg" alt="">

                        
                        <div class="page-header-placeholder"></div>
                        
                    </div>
                </header>

                <div id="content-wrapper" class="container">
                    <div class="row-offcanvas row-offcanvas-left">
                        <div id="left-sidebar" class="sidebar-offcanvas clearfix hidden-print" role="complementary">
                            <!-- PAGE MENU -->
                            
                            
                            
                            <div class="widget-1 first-widget widget widget_nav_menu">
                                <h4 class="widgettitle">Menu</h4>
                                <div class="menu-hoofdmenu-container">
                                    <!-- PAGE MENU -->
                                    <ul class="menu">
                                        
                                        
                                            
                                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                                                <a href="/yoda/administration/installing-licenses.html">Installing Licenses</a>
                                            </li>
                                        
                                            
                                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                                                <a href="/yoda/administration/installing-terms.html">Installing terms</a>
                                            </li>
                                        
                                            
                                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children current-menu-item">
                                                <a href="/yoda/administration/installing-metadata-schemas.html">Installing metadata schemas</a>
                                            </li>
                                        
                                            
                                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                                                <a href="/yoda/administration/upgrading-metadata-schemas.html">Upgrading metadata schemas</a>
                                            </li>
                                        
                                            
                                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                                                <a href="/yoda/administration/background-jobs.html">Background jobs</a>
                                            </li>
                                        
                                            
                                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                                                <a href="/yoda/administration/troubleshooting-publication.html">Troubleshooting publication</a>
                                            </li>
                                        
                                            
                                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                                                <a href="/yoda/administration/restore-collection.html">Restore collection</a>
                                            </li>
                                        
                                    </ul>
                                </div>
                            </div>
                            
                            <!-- /PAGE MENU -->
                        </div>

                        <div class="page-content clearfix">
                            
                            <div class="page-title">
                                <h1>
                                    Installing metadata schemas
                                </h1>
                            </div>
                            
			    <!--
                            <div class="toggle-btn-div visible-xs clearfix">
                                <button type="button" class="toggle-btn white button icon left arrow-right" data-toggle="offcanvas">
                                    Show sidebar
                                </button>
                            </div>
                            -->
                            <div class="page-content-inner facetwp-template">

                                <article id="post-6" class="clearfix post-6 page type-page status-publish hentry first-post">
                                    <section class="entry-content">
                                        <h1 id="installing-metadata-schemas">Installing metadata schemas</h1>
<p>For a fully functional research module, a metadata schema is required.
Currently we only have a default-0schema, default-1 schema and a core-0 schema.
These can be found in the irods-ruleset-uu in <code class="highlighter-rouge">schemas/</code>.
Below a description of the needed files per schema (using the default schema as example):</p>

<p><strong>metadata.json</strong>
  A JSON file describing the metadata form.</p>

<p><strong>uischema.json</strong>
  A JSON file describing how a given data type should be rendered as a form input component. It provides information on how the form should be rendered.</p>

<p>You can install this set with the <code class="highlighter-rouge">tools/install-metadata-schema.r</code> script. This script accepts five parameters:
resc, src, schema, category and update.</p>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Default value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>resc</td>
      <td>irodsResc</td>
      <td>Name of default resource to put the files into</td>
    </tr>
    <tr>
      <td>src</td>
      <td>/etc/irods/irods-ruleset-uu/schemas</td>
      <td>Source directory of files</td>
    </tr>
    <tr>
      <td>schema</td>
      <td>default</td>
      <td>Schema to install</td>
    </tr>
    <tr>
      <td>category</td>
      <td>default-1</td>
      <td>Install schema to all categories (‘default-1’) or install to a single category (category name)</td>
    </tr>
    <tr>
      <td>update</td>
      <td>0</td>
      <td>Update existing schema (1) or keep existing files (0)</td>
    </tr>
  </tbody>
</table>

<p>In the default situation the default schema is installed in <code class="highlighter-rouge">/${RODSZONE}/yoda/schemas/default</code>.</p>

<p>Example invocation to install (or update) schema ‘default’ for all categories:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>irule <span class="nt">-F</span> install-metadata-schema.r <span class="s1">'*resc="irodsResc"'</span> <span class="s1">'*src="/etc/irods/irods-ruleset-uu/schemas/"'</span> <span class="s1">'*schema="default-1"'</span> <span class="s1">'*category="default"'</span> <span class="s1">'*update=1'</span>
</code></pre></div></div>

<p>Example invocation to install (or update) schema ‘core-0’ for category ‘experimental’:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>irule <span class="nt">-F</span> install-metadata-schema.r <span class="s1">'*resc="irodsResc"'</span> <span class="s1">'*src="/etc/irods/irods-ruleset-uu/schemas/"'</span> <span class="s1">'*schema="core-0"'</span> <span class="s1">'*category="experimental"'</span> <span class="s1">'*update=1'</span>
</code></pre></div></div>

<p>If you want to install individual files without the script then you can use the iput command.
If you install the files in a directory with the same name as the name of a category it will become the schema for that category and that category alone, when the category is created afterwards. Existing categories without a specific schema will still use the default schema.
To update existing files use the force flag “-f”.
See the example below. Please replace <code class="highlighter-rouge">${RODSZONE}</code> with the current iRODS Zone and <code class="highlighter-rouge">${CATEGORY}</code> with the category you want to install.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>iput <span class="nt">-f</span> metadata.json /<span class="k">${</span><span class="nv">RODSZONE</span><span class="k">}</span>/yoda/schemas/<span class="k">${</span><span class="nv">CATEGORY</span><span class="k">}</span>/metadata.json
iput <span class="nt">-f</span> uischema.json /<span class="k">${</span><span class="nv">RODSZONE</span><span class="k">}</span>/yoda/schemas/<span class="k">${</span><span class="nv">CATEGORY</span><span class="k">}</span>/uischema.json
</code></pre></div></div>

<p>The above is legal bash if you define the <code class="highlighter-rouge">CATEGORY</code> and <code class="highlighter-rouge">RODSZONE</code> environment variables, for example:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">CATEGORY</span><span class="o">=</span>default
<span class="nb">export </span><span class="nv">RODSZONE</span><span class="o">=</span>tempZone
</code></pre></div></div>

<p>Mistakes are easily made as the commands are so similar, but different.
So please take care.</p>

                                    </section>

                                    <footer class="article-footer"></footer>
                                </article>
                            </div> <!-- /page-content-inner -->
                        </div> <!-- /page-content -->
                    </div> <!--row-offcanvas -->
                </div> <!-- /#content-wrapper -->
            </div>

            <footer id="colophon" class="footer hidden-print">
                <div id="inner-footer" class="container clearfix">
                    <div class="row">
                        <div class="col-sm-6">
                            <img alt="Logo Utrecht University" src="/yoda/assets/images/uu-logo-footer.svg">
                        </div>
                        <div class="col-sm-6">
                            <p class="source-org copyright pull-right">© 2020 Utrecht University, <a href="https://www.uu.nl/en/organisation/contact/disclaimer">disclaimer</a></p>
                        </div>
                    </div>
                </div>
            </footer>

            <p id="back-top" style="display: none;">
                <a href="#top"><i class="fa fa-angle-up"></i></a>
            </p>

            <script type="text/javascript" src='/yoda/assets/js/jquery.js'></script>
<script type="text/javascript" src='/yoda/assets/js/bootstrap.min.js'></script>
        </div>
    </body>
</html>
