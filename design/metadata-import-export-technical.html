<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Metadata import and export functionality - Yoda</title> <link rel="shortcut icon" href="/yoda/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/yoda/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/yoda/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/yoda/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Metadata import and export functionality | Yoda</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="Metadata import and export functionality" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="On this website you can find release notes and technical documentation on software design and administration tasks of Yoda" /> <meta property="og:description" content="On this website you can find release notes and technical documentation on software design and administration tasks of Yoda" /> <meta property="og:site_name" content="Yoda" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Metadata import and export functionality" /> <script type="application/ld+json"> {"description":"On this website you can find release notes and technical documentation on software design and administration tasks of Yoda","@type":"WebPage","url":"/yoda/design/metadata-import-export-technical.html","headline":"Metadata import and export functionality","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/yoda/" class="site-title lh-tight"> Yoda </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/yoda/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/yoda/release-notes/" class="nav-list-link">Release notes</a><ul class="nav-list "><li class="nav-list-item "><a href="/yoda/release-notes/release-1.8.html" class="nav-list-link">v1.8</a></li><li class="nav-list-item "><a href="/yoda/release-notes/release-1.7.html" class="nav-list-link">v1.7</a></li><li class="nav-list-item "><a href="/yoda/release-notes/release-1.6.html" class="nav-list-link">v1.6</a></li><li class="nav-list-item "><a href="/yoda/release-notes/release-1.5.html" class="nav-list-link">v1.5</a></li><li class="nav-list-item "><a href="/yoda/release-notes/release-1.4.html" class="nav-list-link">v1.4</a></li><li class="nav-list-item "><a href="/yoda/release-notes/release-1.3.html" class="nav-list-link">v1.3</a></li><li class="nav-list-item "><a href="/yoda/release-notes/release-1.2.html" class="nav-list-link">v1.2</a></li><li class="nav-list-item "><a href="/yoda/release-notes/release-1.1.html" class="nav-list-link">v1.1</a></li><li class="nav-list-item "><a href="/yoda/release-notes/release-1.0.html" class="nav-list-link">v1.0</a></li><li class="nav-list-item "><a href="/yoda/release-notes/release-0.9.7.html" class="nav-list-link">v0.9.7</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/yoda/design/" class="nav-list-link">Software design</a><ul class="nav-list "><li class="nav-list-item "><a href="/yoda/design/async-system-execution.html" class="nav-list-link">Asynchronous and Privileged Execution</a></li><li class="nav-list-item "><a href="/yoda/design/metadata-schemas.html" class="nav-list-link">Community dependent files for configuration of metadata handling</a></li><li class="nav-list-item "><a href="/yoda/design/dans-sword2.html" class="nav-list-link">DANS sword2.0 interface #</a></li><li class="nav-list-item "><a href="/yoda/design/data-requests.html" class="nav-list-link">Data requests</a></li><li class="nav-list-item "><a href="/yoda/design/deposit-space.html" class="nav-list-link">Deposit space</a></li><li class="nav-list-item "><a href="/yoda/design/external-user-service.html" class="nav-list-link">External User Service</a></li><li class="nav-list-item "><a href="/yoda/design/locking-mechanism.html" class="nav-list-link">Folder Locking mechanism</a></li><li class="nav-list-item "><a href="/yoda/design/metadata-form-json.html" class="nav-list-link">JSON schema for YoDa</a></li><li class="nav-list-item "><a href="/yoda/design/metadata-mappings.html" class="nav-list-link">Mapping of yoda-metadata.json</a></li><li class="nav-list-item "><a href="/yoda/design/metadata-form.html" class="nav-list-link">Metadata form</a></li><li class="nav-list-item active"><a href="/yoda/design/metadata-import-export-technical.html" class="nav-list-link active">Metadata import and export functionality</a></li><li class="nav-list-item "><a href="/yoda/design/metadata-vault.html" class="nav-list-link">Metadata of datasets in the vault</a></li><li class="nav-list-item "><a href="/yoda/design/metadata-schema-identifier.html" class="nav-list-link">Metadata schema identifier</a></li><li class="nav-list-item "><a href="/yoda/design/group-manager.html" class="nav-list-link">Overview of the Yoda group-manager</a></li><li class="nav-list-item "><a href="/yoda/design/publication-process.html" class="nav-list-link">Publication Process</a></li><li class="nav-list-item "><a href="/yoda/design/research-space.html" class="nav-list-link">Research space</a></li><li class="nav-list-item "><a href="/yoda/design/revisions.html" class="nav-list-link">Revision management</a></li><li class="nav-list-item "><a href="/yoda/design/statistics.html" class="nav-list-link">Statistics module</a></li><li class="nav-list-item "><a href="/yoda/design/system-overview.html" class="nav-list-link">System overview</a></li><li class="nav-list-item "><a href="/yoda/design/vault-process.html" class="nav-list-link">To vault process in research module</a></li><li class="nav-list-item "><a href="/yoda/design/metadata-transformation.html" class="nav-list-link">Transformation of metadata within Yoda #</a></li><li class="nav-list-item "><a href="/yoda/design/vault-space.html" class="nav-list-link">Vault space</a></li><li class="nav-list-item "><a href="/yoda/design/yoda-moai.html" class="nav-list-link">Yoda MOAI service</a></li><li class="nav-list-item "><a href="/yoda/design/python-plugin.html" class="nav-list-link">Yoda and the iRODS python plugin</a></li><li class="nav-list-item "><a href="/yoda/design/yodadrive.html" class="nav-list-link">YodaDrive</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/yoda/administration/" class="nav-list-link">Administration tasks</a><ul class="nav-list "><li class="nav-list-item "><a href="/yoda/administration/configuring-yoda.html" class="nav-list-link">Configuring Yoda</a></li><li class="nav-list-item "><a href="/yoda/administration/deploying-yoda.html" class="nav-list-link">Deploying Yoda</a></li><li class="nav-list-item "><a href="/yoda/administration/hotfixing-ruleset.html" class="nav-list-link">Hotfixing ruleset</a></li><li class="nav-list-item "><a href="/yoda/administration/installing-licenses.html" class="nav-list-link">Installing Licenses</a></li><li class="nav-list-item "><a href="/yoda/administration/installing-terms.html" class="nav-list-link">Installing Terms & Conditions</a></li><li class="nav-list-item "><a href="/yoda/administration/installing-preservable-file-formats.html" class="nav-list-link">Installing lists of preservable file formats</a></li><li class="nav-list-item "><a href="/yoda/administration/installing-metadata-schemas.html" class="nav-list-link">Installing metadata schemas</a></li><li class="nav-list-item "><a href="/yoda/administration/installing-datarequest-module.html" class="nav-list-link">Installing datarequest module</a></li><li class="nav-list-item "><a href="/yoda/administration/upgrading-metadata-schemas.html" class="nav-list-link">Upgrading metadata schemas</a></li><li class="nav-list-item "><a href="/yoda/administration/background-jobs.html" class="nav-list-link">Long-running background jobs</a></li><li class="nav-list-item "><a href="/yoda/administration/troubleshooting-publication.html" class="nav-list-link">Troubleshooting publication</a></li><li class="nav-list-item "><a href="/yoda/administration/configuring-openidc.html" class="nav-list-link">Configuring OIDC</a></li><li class="nav-list-item "><a href="/yoda/administration/restore-collection.html" class="nav-list-link">Restore collection</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/yoda/development/" class="nav-list-link">Development</a><ul class="nav-list "><li class="nav-list-item "><a href="/yoda/development/setting-up-development-environment.html" class="nav-list-link">Setting up development environment</a></li><li class="nav-list-item "><a href="/yoda/development/development-tips.html" class="nav-list-link">Development tips</a></li><li class="nav-list-item "><a href="/yoda/development/wall-of-fame.html" class="nav-list-link">Wall of Fame</a></li><li class="nav-list-item "><a href="/yoda/development/yodadrive-development-environment.html" class="nav-list-link">Setting up YodaDrive development environment</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Yoda" aria-label="Search Yoda" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/UtrechtUniversity/yoda" class="site-button" > Yoda on GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/yoda/design/">Software design</a></li> <li class="breadcrumb-nav-list-item"><span>Metadata import and export functionality</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="metadata-import-and-export-functionality"> <a href="#metadata-import-and-export-functionality" class="anchor-heading" aria-labelledby="metadata-import-and-export-functionality"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Metadata import and export functionality </h1> <p>The import and export functionality establishes the bridge between the REACT form, JSON schema based, and the YoDa application XML.</p> <p>In essence<br /> -the export functionality transforms the JSON data that was posted by the form into the yoda-metadata.xml conform the Yoda application requirements for the layout of the XML.<br /> -the import functionality transforms yoda-metadata.xml into JSON that is prepared for handling by he metadata form.</p> <h2 id="import"> <a href="#import" class="anchor-heading" aria-labelledby="import"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> IMPORT </h2> <p>Purpose: Build JSON encoded data structure conform the REACT requirements to ‘feed’ the metadata form as such that YoDa is able to present a metadata form that resembles that original metadataform in functionality as well as gui.</p> <p><img src="/yoda/design/img/import.png" alt="OVerview MOAI-CKAN" /></p> <p>Example CONTRIBUTOR field</p> <p>Internal PHP representation of contributor field as read from JSON schema. The import functionality within the portal software use this structure to be able to determine wheter data is present within yoda-metadata.xml The resulting JSON object is put to the REACT form.</p> <p>DIT IS PHP representatie - kan mogelijk anders worden ingezet (bij import????)</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> [type] = array
 [items]
      [type] =&gt; object – JSON form way of saying a nested structure is present
      [yoda:structure] =&gt; subproperties   - YODA way of indicating which type of nested structure
      [properties]
              [Name]
                   [$ref] =&gt; #/definitions/stringNormal
                   [title] =&gt; Contributor to datapackage
               [Contributor_Type]
                      [$ref] =&gt; #/definitions/optionsContributorType
                      [title] =&gt; Contributor type
               [Affiliation]
                     [type] =&gt; array
                     [default]
                           [0] =&gt; Utrecht University
                      [items]
                          [$ref] =&gt; #/definitions/stringNormal
                          [title] =&gt; Affiliation
                          [yoda:required] =&gt; 1
                   [Person_Identifier]
                                   [type] = array
                                   [items]
                                              [type] =&gt; object
                                               [title] =&gt; Person identifier
                                              [yoda:structure] =&gt; compound
                                              [properties] =&gt; Array
                                                        [Name_Identifier_Scheme] =&gt; Array
                                                             [$ref] =&gt; #/definitions/optionsNameIdentifierScheme
                                                             [title] =&gt; Type
                                                         [Name_Identifier] =&gt; Array
                                                               [$ref] =&gt; #/definitions/stringNormal
                                                               [title] =&gt; Identifier
                                                               [dependencies] =&gt; Array
                                                                    [Name_Identifier_Scheme]
                                                                            [0] =&gt; Name_Identifier
                                                                      [Name_Identifier] =&gt; Array
                                                                            [0] =&gt; Name_Identifier_Scheme
</code></pre></div></div> <h2 id="export-functionality"> <a href="#export-functionality" class="anchor-heading" aria-labelledby="export-functionality"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Export functionality </h2> <p>Purposes:</p> <ul> <li>Build yoda-metadata.xml based upon the posted output from the REACT form</li> <li>Write metadata to iCAT database so it can be searched</li> </ul> <p><img src="/yoda/design/img/export.png" alt="OVerview MOAI-CKAN" /></p> <p>There are two steps involved when the researcher submits the data package to the vault</p> <ol> <li>save data in yoda-metadata.xml for the datapackage Based upon the form definition in formelements.xml the posted metadata is matched and saved into yoda-metadata.xml in the corresponding folder.</li> </ol> <ul> <li>Data that is not ‘known’, i.e. not defined in formelements.xml is NOT saved.</li> <li> <p>Incomplete subproperty structures are NOT saved in this situation.</p> </li> <li>Data that is sent as empty strings will not be saved. This to keep the metadata that is registered in iCat as effective as possible and not be fully drained with empty metadata values</li> </ul> <ol> <li>save data from yoda-metadata.xml into AVU’s for the datapackage Writing the metadata-xml file triggers an iRODS-policy to process the content of the file (in XML format), via a stylesheet, into AVU’s. The stylesheet ‘flattens’ the hierarchical XML formatted data so all values have an attribute like where all XML tags are places on one line, like: <em>Contributor_Properties_Identifier_Person_Identifier_Scheme elaborated with numeric indexes if multiplicity is involved</em></li> </ol> <p>Step 2 also occurs when a researcher places a yoda-metadata.xml file on the web disk.</p> <p>The main definition can be found in JSON Schema definition</p> <p><strong>Subproperty structure:</strong><br /> In XML a subproperty structure holds a <Properties> tag to separate the leadproperty area in the structure from the subproperty area. This designation is not present within the JSON schema representation and has to be added while transforming the JSON data to XML</Properties></p> <p>** indexed search on metadata **<br /> Adding values to the iRODS iCAT database, based upon an XSLT, makes search actions possible from the portal within the metadata.</p> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2017-2021 <a href="https://www.uu.nl/">Utrecht University</a>. Licensed under <a href="https://github.com/UtrechtUniversity/yoda/blob/development/LICENSE">GPLv3</a>.</p> <div class="d-flex mt-2"> <p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/UtrechtUniversity/yoda/tree/pyportal/docs/design/metadata-import-export-technical.md" id="edit-this-page">Edit this page on GitHub.</a> </p> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
