<!DOCTYPE html>
<html lang="en">
    <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <link rel="icon" href="/yoda/assets/images/favicon.ico">

  <title>Asynchronous processes</title>

  <link rel='stylesheet' id='bootstrap-css'  href='//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css' type='text/css' media='all' />
  <link rel="stylesheet" href="/yoda/assets/css/style.css" type="text/css" media="screen" />
  <link rel="stylesheet" href="/yoda/assets/css/custom.css" type="text/css" media="screen" />
  <link rel="stylesheet" href="/yoda/assets/css/print.css" type="text/css" media="print" />
</head>

    <body data-rsssl="1" class="page-template-default page page-id-6 page-parent" data-spy="scroll" data-target="#sidebarnav">
        <div id="page">

            <div id="brandbar" class="affix-top">
    <div class="container">
        <div class="row">
            <div class="col-sm-4 col-xs-8 logodiv">
                <button type="button" class="navbar-toggle hidden-print" data-toggle="collapse" data-target="#main-menu-collapse">
                    <span class="sr-only">Navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a href="https://www.uu.nl/en">
                    <img src="/yoda/assets/images/uu-logo.svg" alt="Logo Utrecht University">
                </a>

                <div class="visible-print-block">
                    <h1>YODA</h1>
                </div>
            </div>

            <div class="col-sm-6 col-xs-4 hidden-print" role="search">
                <!--
                <div class="pull-right">
                    <form method="get" id="searchform" action="https://yoda.sites.uu.nl">
                        <div class="search-wrapper">
                            <label class="screen-reader-text" for="s">'</label>
                            <input type="text" class="searchfield" value="" name="s" id="s" placeholder="Search the Site...">
                            <input type="submit" id="searchsubmit" class="searchbutton" value="">
                        </div>
                    </form>
                </div>
                -->
            </div>
        </div>
    </div>
</div>
<header id="masthead" class="header hidden-print">
    <div class="container">
        <h1>
            <a href="/yoda" rel="home" title="YODA">
                YODA
            </a>
        </h1>
    </div>
</header>

<a class="skip-link sr-only" href="#content">Skip to content</a>

<!-- MAIN MENU -->
<nav id="#access" class="navbar navbar-default navbar-inverse">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="container">
        <div class="navbar-header"></div>
        <div id="main-menu-collapse" class="collapse navbar-collapse">
            <ul id="menu-hoofdmenu" class="nav navbar-nav">
                
                
                
                <li class="first-item menu-item menu-item-type-post_type menu-item-object-page dropdown">
                    <a title="Release notes" href="/yoda/release-notes/index.html">Release notes</a>
                    
                    
                    
                    <ul class="submenu visible-xs visible-sm nav navbar-nav">
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="Release 1.7" href="/yoda/release-notes/release-1.7.html">
                                Release 1.7
                            </a>
                        </li>
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="Release 1.6" href="/yoda/release-notes/release-1.6.html">
                                Release 1.6
                            </a>
                        </li>
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="Release 1.5" href="/yoda/release-notes/release-1.5.html">
                                Release 1.5
                            </a>
                        </li>
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="Release 1.4" href="/yoda/release-notes/release-1.4.html">
                                Release 1.4
                            </a>
                        </li>
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="Release 1.3" href="/yoda/release-notes/release-1.3.html">
                                Release 1.3
                            </a>
                        </li>
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="Release 1.2" href="/yoda/release-notes/release-1.2.html">
                                Release 1.2
                            </a>
                        </li>
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="Release 1.1" href="/yoda/release-notes/release-1.1.html">
                                Release 1.1
                            </a>
                        </li>
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="Release 1.0" href="/yoda/release-notes/release-1.0.html">
                                Release 1.0
                            </a>
                        </li>
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="Release 0.9.7" href="/yoda/release-notes/release-0.9.7.html">
                                Release 0.9.7
                            </a>
                        </li>
                        
                    </ul>
                    
                </li>
                
                
                <li class="first-item menu-item menu-item-type-post_type menu-item-object-page dropdown">
                    <a title="Administration" href="/yoda/administration/index.html">Administration</a>
                    
                    
                    
                    <ul class="submenu visible-xs visible-sm nav navbar-nav">
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="Installing Licenses" href="/yoda/administration/installing-licenses.html">
                                Installing Licenses
                            </a>
                        </li>
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="Installing terms" href="/yoda/administration/installing-terms.html">
                                Installing terms
                            </a>
                        </li>
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="Installing metadata schemas" href="/yoda/administration/installing-metadata-schemas.html">
                                Installing metadata schemas
                            </a>
                        </li>
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="Upgrading metadata schemas" href="/yoda/administration/upgrading-metadata-schemas.html">
                                Upgrading metadata schemas
                            </a>
                        </li>
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="Troubleshooting publication" href="/yoda/administration/troubleshooting-publication.html">
                                Troubleshooting publication
                            </a>
                        </li>
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="Restore collection" href="/yoda/administration/restore-collection.html">
                                Restore collection
                            </a>
                        </li>
                        
                    </ul>
                    
                </li>
                
                
                <li class="first-item menu-item menu-item-type-post_type menu-item-object-page dropdown">
                    <a title="Development" href="/yoda/development/index.html">Development</a>
                    
                    
                    
                    <ul class="submenu visible-xs visible-sm nav navbar-nav">
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="Setting up development environment" href="/yoda/development/setting-up-development-environment.html">
                                Setting up development environment
                            </a>
                        </li>
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="Development environment test users and data" href="/yoda/development/development-test-data.html">
                                Development environment test users and data
                            </a>
                        </li>
                        
                    </ul>
                    
                </li>
                
                
                <li class="first-item menu-item menu-item-type-post_type menu-item-object-page dropdown">
                    <a title="Software design" href="/yoda/design/index.html">Software design</a>
                    
                    
                    
                    <ul class="submenu visible-xs visible-sm nav navbar-nav">
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="System overview" href="/yoda/design/system-overview.html">
                                System overview
                            </a>
                        </li>
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="Research space" href="/yoda/design/research-space.html">
                                Research space
                            </a>
                        </li>
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="Vault space" href="/yoda/design/vault-space.html">
                                Vault space
                            </a>
                        </li>
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="Asynchronous and privileged execution" href="/yoda/design/async-system-execution.html">
                                Asynchronous and privileged execution
                            </a>
                        </li>
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="External user service" href="/yoda/design/external-user-service.html">
                                External user service
                            </a>
                        </li>
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="Group manager" href="/yoda/design/group-manager.html">
                                Group manager
                            </a>
                        </li>
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="Locking mechanism" href="/yoda/design/locking-mechanism.html">
                                Locking mechanism
                            </a>
                        </li>
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="Metadata form" href="/yoda/design/metadata-form.html">
                                Metadata form
                            </a>
                        </li>
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="Publication process" href="/yoda/design/publication-process.html">
                                Publication process
                            </a>
                        </li>
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="Python plugin" href="/yoda/design/python-plugin.html">
                                Python plugin
                            </a>
                        </li>
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="Statistics module" href="/yoda/design/statistics.html">
                                Statistics module
                            </a>
                        </li>
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="Revision management" href="/yoda/design/revisions.html">
                                Revision management
                            </a>
                        </li>
                        
                        
                        <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                            <a title="Vault process" href="/yoda/design/vault-process.html">
                                Vault process
                            </a>
                        </li>
                        
                    </ul>
                    
                </li>
                
            </ul>
        </div>
    </div>
</nav>
<!-- /MAIN MENU -->


            <div id="content" class="two-col">
                <header class="article-header article-header-main">
                    <div class="header-image hidden-print">

                        
                        <div class="breadcrumbs" xmlns:v="https://rdf.data-vocabulary.org/#">
                            <div class="container">
							<span property="itemListElement" typeof="ListItem">
								<span property="name">YODA</span>
								<meta property="position" content="1">
							</span>
                            </div>
                        </div>
                        

                        <img src="/yoda/assets/images/header.jpg" alt="">

                        
                        <div class="page-header-placeholder"></div>
                        
                    </div>
                </header>

                <div id="content-wrapper" class="container">
                    <div class="row-offcanvas row-offcanvas-left">
                        <div id="left-sidebar" class="sidebar-offcanvas clearfix hidden-print" role="complementary">
                            <!-- PAGE MENU -->
                            
                            
                            
                            <div class="widget-1 first-widget widget widget_nav_menu">
                                <h4 class="widgettitle">Menu</h4>
                                <div class="menu-hoofdmenu-container">
                                    <!-- PAGE MENU -->
                                    <ul class="menu">
                                        
                                        
                                            
                                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                                                <a href="/yoda/design/system-overview.html">System overview</a>
                                            </li>
                                        
                                            
                                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                                                <a href="/yoda/design/research-space.html">Research space</a>
                                            </li>
                                        
                                            
                                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                                                <a href="/yoda/design/vault-space.html">Vault space</a>
                                            </li>
                                        
                                            
                                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                                                <a href="/yoda/design/async-system-execution.html">Asynchronous and privileged execution</a>
                                            </li>
                                        
                                            
                                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                                                <a href="/yoda/design/external-user-service.html">External user service</a>
                                            </li>
                                        
                                            
                                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                                                <a href="/yoda/design/group-manager.html">Group manager</a>
                                            </li>
                                        
                                            
                                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                                                <a href="/yoda/design/locking-mechanism.html">Locking mechanism</a>
                                            </li>
                                        
                                            
                                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                                                <a href="/yoda/design/metadata-form.html">Metadata form</a>
                                            </li>
                                        
                                            
                                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                                                <a href="/yoda/design/publication-process.html">Publication process</a>
                                            </li>
                                        
                                            
                                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                                                <a href="/yoda/design/python-plugin.html">Python plugin</a>
                                            </li>
                                        
                                            
                                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                                                <a href="/yoda/design/statistics.html">Statistics module</a>
                                            </li>
                                        
                                            
                                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                                                <a href="/yoda/design/revisions.html">Revision management</a>
                                            </li>
                                        
                                            
                                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                                                <a href="/yoda/design/vault-process.html">Vault process</a>
                                            </li>
                                        
                                    </ul>
                                </div>
                            </div>
                            
                            <!-- /PAGE MENU -->
                        </div>

                        <div class="page-content clearfix">
                            
                            <div class="page-title">
                                <h1>
                                    Asynchronous processes
                                </h1>
                            </div>
                            
			    <!--
                            <div class="toggle-btn-div visible-xs clearfix">
                                <button type="button" class="toggle-btn white button icon left arrow-right" data-toggle="offcanvas">
                                    Show sidebar
                                </button>
                            </div>
                            -->
                            <div class="page-content-inner facetwp-template">

                                <article id="post-6" class="clearfix post-6 page type-page status-publish hentry first-post">
                                    <section class="entry-content">
                                        <h1 id="asynchronous-processes">Asynchronous processes</h1>

<p>This page contains an overview of asynchronous processes in Yoda.</p>

<h2 id="table-of-contents">Table of contents</h2>

<ul>
  <li><a href="#metadata">Metadata</a></li>
  <li><a href="#metadata-schema-update-job">Metadata schema update job</a></li>
  <li><a href="#replication">Replication</a></li>
  <li><a href="#replication-job">Replication job</a></li>
  <li><a href="#revision-management">Revision management</a></li>
  <li><a href="#revision-creation-job">Revision management - creation job</a></li>
  <li><a href="#revision-cleanup-job">Revision management - cleanup job</a></li>
  <li><a href="#statistics">Statistics</a></li>
  <li><a href="#statistics-job">Statistics job</a></li>
  <li><a href="#archiving">Archiving</a></li>
  <li><a href="#archiving-retry-copy-job">Archiving - retry-copy-to-vault job</a></li>
  <li><a href="#archiving-intake-to-vault-job">Archiving - intake to vault job</a></li>
  <li><a href="#archiving-publication-job">Archiving - publication job</a></li>
  <li><a href="#archiving-vault-integrity-job">Archiving - vault integrity job</a></li>
</ul>

<p><a name="metadata"></a></p>

<h2 id="metadata">Metadata</h2>

<p>Metadata changes are handled synchronously, except for batch updates of data package metadata
after schema updates.</p>

<p><a name="metadata-schema-update-job"></a></p>

<h3 id="schema-update-job">Schema update job</h3>

<table>
  <thead>
    <tr>
      <th> </th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Script</td>
      <td>/etc/irods/irods-ruleset-uu/tools/check-metadata-for-schema-updates.r</td>
    </tr>
    <tr>
      <td>Purpose</td>
      <td>verify and update data package metadata to new schema versions</td>
    </tr>
    <tr>
      <td>Lock file</td>
      <td>no locking</td>
    </tr>
    <tr>
      <td>Scheduling</td>
      <td>delayed rule queue</td>
    </tr>
    <tr>
      <td>Typically started by</td>
      <td>manually by application administrator, after schema or application upgrade</td>
    </tr>
  </tbody>
</table>

<p>Any changes to data package metadata will be recorded in the rodsLog.</p>

<p><a name="replication"></a></p>

<h2 id="replication">Replication</h2>

<p>By default, data in Yoda is replicated across two servers. Policies add a metadata attribute
to data objects that should be replicated, and the asynchronous replication job replicates these
objects. The default name of the metadata attribute is <code class="language-plaintext highlighter-rouge">org_replication_scheduled</code>; the attribute value
contains the source and destination resource, separated by commas.</p>

<p><a name="replication-job"></a></p>

<h3 id="replication-job">Replication job</h3>

<table>
  <thead>
    <tr>
      <th> </th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Script</td>
      <td>/etc/irods/irods-ruleset-uu/tools/async-data-replicate.py</td>
    </tr>
    <tr>
      <td>Purpose</td>
      <td>replicate data objects to consumer</td>
    </tr>
    <tr>
      <td>Lock file</td>
      <td>/tmp/irods-async-data-replicate.py.lock</td>
    </tr>
    <tr>
      <td>Scheduling</td>
      <td>cronjob, data object queue based on data object metadata attributes</td>
    </tr>
    <tr>
      <td>Typically started by</td>
      <td>cronjob runs every five minutes</td>
    </tr>
  </tbody>
</table>

<p>Data objects are marked for revision creation using a metadata attribute. The default name of these
attributes is <code class="language-plaintext highlighter-rouge">org_replication_scheduled</code>.</p>

<p>The script has a verbose mode (which can be enabled using the <code class="language-plaintext highlighter-rouge">-v</code> switch). This will log additional
information for troubleshooting to the rodsLog.</p>

<p>If a flag data object named <code class="language-plaintext highlighter-rouge">/ZONE/yoda/flags/stop_replication</code> is present, the script will stop
processing data objects.</p>

<p><a name="revision-management"></a></p>

<h2 id="revision-management">Revision management</h2>

<p>Yoda supports revision management of data objects, so that users can recover older versions of files.
Old revisions are removed regularly using a <a href="/yoda/design/revisions.html">revision strategy</a>. Both revision creation
and revision cleanup are handled asynchronously.</p>

<p><a name="revision-creation-job"></a></p>

<h3 id="revision-creation-job">Revision creation job</h3>

<table>
  <thead>
    <tr>
      <th> </th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Script</td>
      <td>/etc/irods/irods-ruleset-uu/tools/async-data-revision.py</td>
    </tr>
    <tr>
      <td>Purpose</td>
      <td>create revisions of data objects</td>
    </tr>
    <tr>
      <td>Lock file</td>
      <td>/tmp/irods-async-data-revision.py.lock</td>
    </tr>
    <tr>
      <td>Scheduling</td>
      <td>cronjob, queue based on data object metadata attributes</td>
    </tr>
    <tr>
      <td>Typically started by</td>
      <td>cronjob runs every five minutes</td>
    </tr>
  </tbody>
</table>

<p>Data objects are marked for revision creation using a metadata attribute. The default name of these
attributes is <code class="language-plaintext highlighter-rouge">org_revision_scheduled</code>.</p>

<p>The script has a verbose mode (which can be enabled using the <code class="language-plaintext highlighter-rouge">-v</code> switch). This will log additional
information for troubleshooting to the rodsLog.</p>

<p>If a flag data object named <code class="language-plaintext highlighter-rouge">/ZONE/yoda/flags/stop_revisions</code> is present, the script will stop
processing data objects.</p>

<p><a name="revision-cleanup-job"></a></p>

<h3 id="revision-cleanup-job">Revision cleanup job</h3>

<table>
  <thead>
    <tr>
      <th> </th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Script</td>
      <td>/var/lib/irods/.irods/cronjob-revision-cleanup.sh</td>
    </tr>
    <tr>
      <td>Purpose</td>
      <td>remove unneeded revisions of data objects, as per revision strategy</td>
    </tr>
    <tr>
      <td>Lock file</td>
      <td>no lock file</td>
    </tr>
    <tr>
      <td>Typically started by</td>
      <td>daily cronjob</td>
    </tr>
  </tbody>
</table>

<p><a name="statistics"></a></p>

<h2 id="statistics">Statistics</h2>

<p>The statistics module provides users with an overview of the amount of data stored in Yoda groups
and communities.</p>

<p><a name="statistics-job"></a></p>

<h3 id="statistics-job">Statistics job</h3>

<table>
  <thead>
    <tr>
      <th> </th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Script</td>
      <td>/etc/irods/irods-ruleset-uu/tools/monthly-storage-statistics.r</td>
    </tr>
    <tr>
      <td>Purpose</td>
      <td>record size of data in group metadata</td>
    </tr>
    <tr>
      <td>Lock file</td>
      <td>no lock file</td>
    </tr>
    <tr>
      <td>Typically started by</td>
      <td>monthly cronjob</td>
    </tr>
  </tbody>
</table>

<p><a name="archiving"></a></p>

<h2 id="archiving-and-publication">Archiving and publication</h2>

<p>Asynchronous jobs are also used to copy data packages from a research or intake folder to the vault,
as well as to process publications. Furthermore, an asynchronous job for verifying vault data integrity
is available.</p>

<p><a name="archiving-retry-copy-job"></a></p>

<h3 id="retry-copy-to-vault-job">Retry copy to vault job</h3>

<table>
  <thead>
    <tr>
      <th> </th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Script</td>
      <td>/etc/irods/irods-ruleset-uu/tools/retry-copy-to-vault.r</td>
    </tr>
    <tr>
      <td>Purpose</td>
      <td>copy data packages from research groups to the vault</td>
    </tr>
    <tr>
      <td>Lock file</td>
      <td>no lock file, but collection metadata attribute records processing status</td>
    </tr>
    <tr>
      <td>Typically started by</td>
      <td>cronjob, runs every minute</td>
    </tr>
  </tbody>
</table>

<p>By default, groups that are to be copied to the vault are marked with a metadata attribute named
<code class="language-plaintext highlighter-rouge">cronjob_copy_to_vault</code>.</p>

<p><a name="archiving-intake-to-vault-job"></a></p>

<h3 id="intake-copy-to-vault-job">Intake copy to vault job</h3>

<table>
  <thead>
    <tr>
      <th> </th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Script</td>
      <td>/var/lib/irods/.irods/job_movetovault.r</td>
    </tr>
    <tr>
      <td>Purpose</td>
      <td>copy data packages from intake groups to the vault</td>
    </tr>
    <tr>
      <td>Lock file</td>
      <td>uses lock attribute on the vault folder</td>
    </tr>
    <tr>
      <td>Typically started by</td>
      <td>cronjob, runs every five minutes</td>
    </tr>
  </tbody>
</table>

<p><a name="archiving-publication-job"></a></p>

<h3 id="process-publication-job">Process publication job</h3>

<table>
  <thead>
    <tr>
      <th> </th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Script</td>
      <td>/etc/irods/irods-ruleset-uu/tools/process-publication.r</td>
    </tr>
    <tr>
      <td>Purpose</td>
      <td>Asynchronously handles publication and depublication of data packages</td>
    </tr>
    <tr>
      <td>Lock file</td>
      <td>no lock file, but status is recorded in metadata</td>
    </tr>
    <tr>
      <td>Typically started by</td>
      <td>cronjob, runs every minute</td>
    </tr>
  </tbody>
</table>

<p><a name="archiving-vault-integrity-job"></a></p>

<h3 id="vault-integrity-check-job">Vault integrity check job</h3>

<table>
  <thead>
    <tr>
      <th> </th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Script</td>
      <td>irods-ruleset-uu/tools/check-vault-integrity.r</td>
    </tr>
    <tr>
      <td>Purpose</td>
      <td>Verifies checksums of data objects in the vault</td>
    </tr>
    <tr>
      <td>Scheduling</td>
      <td>Delayed rule queue</td>
    </tr>
    <tr>
      <td>Typically started by</td>
      <td>manually by administrator</td>
    </tr>
  </tbody>
</table>

<p>All data objects with data integrity issues are logged in the rodsLog. Verifying vault integrity
can take a long time. The batch script adds 256 jobs per 60 seconds to the rule queue in order to
manage the load on the server.</p>

                                    </section>

                                    <footer class="article-footer"></footer>
                                </article>
                            </div> <!-- /page-content-inner -->
                        </div> <!-- /page-content -->
                    </div> <!--row-offcanvas -->
                </div> <!-- /#content-wrapper -->
            </div>

            <footer id="colophon" class="footer hidden-print">
                <div id="inner-footer" class="container clearfix">
                    <div class="row">
                        <div class="col-sm-6">
                            <img alt="Logo Utrecht University" src="/yoda/assets/images/uu-logo-footer.svg">
                        </div>
                        <div class="col-sm-6">
                            <p class="source-org copyright pull-right">© 2020 Utrecht University, <a href="https://www.uu.nl/en/organisation/contact/disclaimer">disclaimer</a></p>
                        </div>
                    </div>
                </div>
            </footer>

            <p id="back-top" style="display: none;">
                <a href="#top"><i class="fa fa-angle-up"></i></a>
            </p>

            <script type="text/javascript" src='/yoda/assets/js/jquery.js'></script>
<script type="text/javascript" src='/yoda/assets/js/bootstrap.min.js'></script>
        </div>
    </body>
</html>
