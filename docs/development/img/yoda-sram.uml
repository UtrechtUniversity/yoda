@startuml
skinparam padding 2
skinparam shadowing false

title Yoda & SRAM

actor       Researcher          as researcher
actor       Datamanager         as datamanager
participant Yoda                as yoda
participant SRAM                as SRAM
participant "Institutional IdP" as IdP

== Create a group ==
autonumber 1.0
datamanager  -> yoda        : Create group
yoda         -> SRAM        : Create CO API
SRAM        --> yoda        : 200 OK
yoda        --> datamanager : Group created

== Add researcher to group ==
autonumber 2.0
datamanager  -> yoda        : Add researcher to group
yoda       -->> researcher  : Invitation mail (SRAM invite link)
...
researcher   -> SRAM        : Follow SRAM invite link
SRAM         -> IdP         : Redirect to IdP
IdP         --> SRAM        : Researcher authenticated
SRAM       -->> datamanager : Invitation accepted notification
...
datamanager  -> SRAM        : Approve invitation

== Remove researcher from group ==
autonumber 3.0
datamanager  -> yoda        : Remove researcher from group
yoda         -> SRAM        : Remove user from CO API
SRAM        --> yoda        : 200 OK
yoda        --> datamanager : Researcher removed from group

== Remove a group ==
autonumber 4.0
datamanager  -> yoda        : Remove group
yoda         -> SRAM        : Remove CO API
SRAM        --> yoda        : 200 OK
yoda        --> datamanager : Group removed

@enduml
