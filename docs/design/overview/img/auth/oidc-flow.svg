<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="805px" preserveAspectRatio="none" style="width:909px;height:805px;" version="1.1" viewBox="0 0 909 805" width="909px" zoomAndPan="magnify"><defs><filter height="300%" id="f1l5oanrmiywig" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="27" x2="27" y1="86.2969" y2="718.2188"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="308.5" x2="308.5" y1="86.2969" y2="718.2188"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="523" x2="523" y1="86.2969" y2="718.2188"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="739" x2="739" y1="86.2969" y2="718.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="8" y="82.9951">User</text><ellipse cx="27" cy="13" fill="#FEFECE" filter="url(#f1l5oanrmiywig)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M27,21 L27,48 M14,29 L40,29 M27,48 L14,63 M27,48 L40,63 " fill="none" filter="url(#f1l5oanrmiywig)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="8" y="730.2139">User</text><ellipse cx="27" cy="743.5156" fill="#FEFECE" filter="url(#f1l5oanrmiywig)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M27,751.5156 L27,778.5156 M14,759.5156 L40,759.5156 M27,778.5156 L14,793.5156 M27,778.5156 L40,793.5156 " fill="none" filter="url(#f1l5oanrmiywig)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f1l5oanrmiywig)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="49" x="282.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="35" x="289.5" y="70.9951">Yoda</text><rect fill="#FEFECE" filter="url(#f1l5oanrmiywig)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="49" x="282.5" y="717.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="35" x="289.5" y="737.2139">Yoda</text><rect fill="#FEFECE" filter="url(#f1l5oanrmiywig)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="465" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="472" y="70.9951">Identity Server</text><rect fill="#FEFECE" filter="url(#f1l5oanrmiywig)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="465" y="717.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="472" y="737.2139">Identity Server</text><rect fill="#FEFECE" filter="url(#f1l5oanrmiywig)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="58" x="708" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="715" y="70.9951">iRODS</text><rect fill="#FEFECE" filter="url(#f1l5oanrmiywig)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="58" x="708" y="717.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="715" y="737.2139">iRODS</text><polygon fill="#A80036" points="297,113.4297,307,117.4297,297,121.4297,301,117.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="27" x2="303" y1="117.4297" y2="117.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="34" y="112.3638">GET login page</text><polygon fill="#A80036" points="38,142.5625,28,146.5625,38,150.5625,34,146.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="32" x2="308" y1="146.5625" y2="146.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="245" x="44" y="141.4966">REDIRECT to Identity Server login page</text><polygon fill="#A80036" points="511,171.6953,521,175.6953,511,179.6953,515,175.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="27" x2="517" y1="175.6953" y2="175.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="34" y="170.6294">GET login page</text><polygon fill="#A80036" points="38,200.8281,28,204.8281,38,208.8281,34,204.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="32" x2="522" y1="204.8281" y2="204.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="44" y="199.7622">RESPONSE login page</text><polygon fill="#A80036" points="511,229.9609,521,233.9609,511,237.9609,515,233.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="27" x2="517" y1="233.9609" y2="233.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="34" y="228.895">POST login credentials</text><polygon fill="#A80036" points="38,259.0938,28,263.0938,38,267.0938,34,263.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="32" x2="522" y1="263.0938" y2="263.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="44" y="258.0278">RESPONSE Consent page</text><polygon fill="#A80036" points="511,288.2266,521,292.2266,511,296.2266,515,292.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="27" x2="517" y1="292.2266" y2="292.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="34" y="287.1606">POST Consent</text><polygon fill="#A80036" points="38,317.3594,28,321.3594,38,325.3594,34,321.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="32" x2="522" y1="321.3594" y2="321.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="44" y="316.2935">REDIRECT Yoda callback with auth code</text><polygon fill="#A80036" points="297,346.4922,307,350.4922,297,354.4922,301,350.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="27" x2="303" y1="350.4922" y2="350.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="34" y="345.4263">POST callback with auth code</text><polygon fill="#A80036" points="511,375.625,521,379.625,511,383.625,515,379.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="309" x2="517" y1="379.625" y2="379.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="183" x="316" y="374.5591">GET Token (using auth code)</text><polygon fill="#A80036" points="320,404.7578,310,408.7578,320,412.7578,316,408.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="314" x2="522" y1="408.7578" y2="408.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="326" y="403.6919">RESPONSE Token</text><polygon fill="#A80036" points="511,433.8906,521,437.8906,511,441.8906,515,437.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="309" x2="517" y1="437.8906" y2="437.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="316" y="432.8247">GET Userinfo (with username)</text><polygon fill="#A80036" points="320,463.0234,310,467.0234,320,471.0234,316,467.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="314" x2="522" y1="467.0234" y2="467.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="326" y="461.9575">RESPONSE Userinfo</text><polygon fill="#A80036" points="727,492.1563,737,496.1563,727,500.1563,731,496.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="309" x2="733" y1="496.1563" y2="496.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="406" x="316" y="491.0903">POST login with username from userinfo and token as password</text><polygon fill="#A80036" points="534,521.2891,524,525.2891,534,529.2891,530,525.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="528" x2="738" y1="525.2891" y2="525.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="540" y="520.2231">GET Userinfo</text><polygon fill="#A80036" points="727,550.4219,737,554.4219,727,558.4219,731,554.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="523" x2="733" y1="554.4219" y2="554.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="530" y="549.356">RESPONSE Userinfo</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="739" x2="781" y1="628.9531" y2="628.9531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="781" x2="781" y1="628.9531" y2="641.9531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="740" x2="781" y1="641.9531" y2="641.9531"/><polygon fill="#A80036" points="750,637.9531,740,641.9531,750,645.9531,746,641.9531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="746" y="578.4888">Compares username</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="746" y="593.6216">received from Userinfo</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="746" y="608.7544">with the one from Yoda.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="746" y="623.8872">If equal:</text><polygon fill="#A80036" points="320,667.0859,310,671.0859,320,675.0859,316,671.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="314" x2="738" y1="671.0859" y2="671.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="326" y="666.02">RESPONSE User authenticated</text><polygon fill="#A80036" points="38,696.2188,28,700.2188,38,704.2188,34,700.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="32" x2="308" y1="700.2188" y2="700.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="258" x="44" y="695.1528">RESPONSE Homepage logged in as user</text><!--MD5=[955ccf95af77aa24908e674511275d35]
@startuml
actor User
participant Yoda
participant "Identity Server" as IS
participant "iRODS" as rods

User->Yoda: GET login page
Yoda->User: REDIRECT to Identity Server login page
User->IS: GET login page
IS->User: RESPONSE login page
User->IS: POST login credentials
IS->User: RESPONSE Consent page
User->IS: POST Consent
IS->User: REDIRECT Yoda callback with auth code
User->Yoda: POST callback with auth code
Yoda->IS: GET Token (using auth code)
IS->Yoda: RESPONSE Token
Yoda->IS: GET Userinfo (with username)
IS->Yoda: RESPONSE Userinfo
Yoda->rods: POST login with username from userinfo and token as password
rods->IS: GET Userinfo
IS->rods: RESPONSE Userinfo
rods->rods: Compares username\nreceived from Userinfo\nwith the one from Yoda.\nIf equal:
rods->Yoda: RESPONSE User authenticated
Yoda->User: RESPONSE Homepage logged in as user
@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.18+10-post-Debian-1deb11u1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>