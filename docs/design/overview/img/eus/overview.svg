<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1745.8333px" preserveAspectRatio="none" style="width:2070px;height:1745px;background:#282C34;" version="1.1" viewBox="0 0 2070 1745" width="2070.8333px" zoomAndPan="magnify"><defs/><g><!--MD5=[9a72c501110bab03ad61b62688d6f0a3]
cluster External user server--><rect fill="#424856" height="973.9583" style="stroke: #61AFEF; stroke-width: 3.125;" width="525" x="45.8333" y="476.0417"/><text fill="#ABB2BF" font-family="CMU Serif" font-size="31.25" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="347.9167" x="134.375" y="513.382">External user server</text><!--MD5=[e9cbb9dd88ded91326c7c57ecf0f8dfc]
cluster PostgreSQL--><path d="M95.8333,1187.5 C95.8333,1166.6667 264.5833,1166.6667 264.5833,1166.6667 C264.5833,1166.6667 433.3333,1166.6667 433.3333,1187.5 L433.3333,1379.1667 C433.3333,1400 264.5833,1400 264.5833,1400 C264.5833,1400 95.8333,1400 95.8333,1379.1667 L95.8333,1187.5 " fill="#424856" style="stroke: #61AFEF; stroke-width: 3.125;"/><path d="M95.8333,1187.5 C95.8333,1208.3333 264.5833,1208.3333 264.5833,1208.3333 C264.5833,1208.3333 433.3333,1208.3333 433.3333,1187.5 " fill="none" style="stroke: #61AFEF; stroke-width: 3.125;"/><text fill="#ABB2BF" font-family="CMU Serif" font-size="31.25" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="204.1667" x="162.5" y="1245.6736">PostgreSQL</text><!--MD5=[0f82c5b863acc6f33562c91596508dc0]
cluster Yoda iRODS server--><rect fill="#424856" height="383.3333" style="stroke: #61AFEF; stroke-width: 3.125;" width="1045.8333" x="620.8333" y="320.8333"/><text fill="#ABB2BF" font-family="CMU Serif" font-size="31.25" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="322.9167" x="982.2917" y="358.1736">Yoda iRODS server</text><!--MD5=[8456d961f5f6728005693a85f4e68806]
cluster iCAT--><path d="M1412.5,441.6667 C1412.5,420.8333 1514.5833,420.8333 1514.5833,420.8333 C1514.5833,420.8333 1616.6667,420.8333 1616.6667,441.6667 L1616.6667,633.3333 C1616.6667,654.1667 1514.5833,654.1667 1514.5833,654.1667 C1514.5833,654.1667 1412.5,654.1667 1412.5,633.3333 L1412.5,441.6667 " fill="#424856" style="stroke: #61AFEF; stroke-width: 3.125;"/><path d="M1412.5,441.6667 C1412.5,462.5 1514.5833,462.5 1514.5833,462.5 C1514.5833,462.5 1616.6667,462.5 1616.6667,441.6667 " fill="none" style="stroke: #61AFEF; stroke-width: 3.125;"/><text fill="#ABB2BF" font-family="CMU Serif" font-size="31.25" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="1477.0833" y="499.8403">iCAT</text><!--MD5=[ab796bbafe617553f50cf109ef492b64]
cluster Yoda portal server--><rect fill="#424856" height="202.0833" style="stroke: #61AFEF; stroke-width: 3.125;" width="358.3333" x="664.5833" y="50"/><text fill="#ABB2BF" font-family="CMU Serif" font-size="31.25" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="316.6667" x="685.4167" y="87.3403">Yoda portal server</text><!--MD5=[9ec8bea2e3593d6bd64a2af552918866]
entity HTTP_UI--><ellipse cx="385.4167" cy="578.125" fill="#424856" rx="16.6667" ry="16.6667" style="stroke: #61AFEF; stroke-width: 4.166666666666667;"/><text fill="#ABB2BF" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacingAndGlyphs" textLength="125" x="322.9167" y="646.7153">HTTP_UI</text><!--MD5=[244818d695f9e3222fa2f8083b8f9921]
entity Webservice--><rect fill="#424856" height="86.377" style="stroke: #61AFEF; stroke-width: 3.125;" width="225" x="79.1667" y="892.7083"/><rect fill="#424856" height="10.4167" style="stroke: #61AFEF; stroke-width: 3.125;" width="20.8333" x="68.75" y="903.125"/><rect fill="#424856" height="10.4167" style="stroke: #61AFEF; stroke-width: 3.125;" width="20.8333" x="68.75" y="958.252"/><text fill="#ABB2BF" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacingAndGlyphs" textLength="175" x="104.1667" y="946.7153">Webservice</text><!--MD5=[99de319847354cc80693506d6a8b7ec0]
entity HTTP_API--><ellipse cx="518.75" cy="935.4167" fill="#424856" rx="16.6667" ry="16.6667" style="stroke: #61AFEF; stroke-width: 4.166666666666667;"/><text fill="#ABB2BF" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacingAndGlyphs" textLength="141.6667" x="447.9167" y="1004.007">HTTP_API</text><!--MD5=[cb789fc524e1555593d1fc5bff9b628e]
entity extusers--><rect fill="#424856" height="86.377" style="stroke: #61AFEF; stroke-width: 3.125;" width="270.8333" x="129.1667" y="1281.25"/><text fill="#ABB2BF" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacingAndGlyphs" textLength="220.8333" x="154.1667" y="1335.257">External users</text><!--MD5=[4d994cc37e3b5b52d99266dfa14827c2]
entity Group Manager Rules--><rect fill="#424856" height="86.377" style="stroke: #61AFEF; stroke-width: 3.125;" width="379.1667" x="654.1667" y="535.4167"/><rect fill="#424856" height="10.4167" style="stroke: #61AFEF; stroke-width: 3.125;" width="20.8333" x="643.75" y="545.8333"/><rect fill="#424856" height="10.4167" style="stroke: #61AFEF; stroke-width: 3.125;" width="20.8333" x="643.75" y="600.9603"/><text fill="#ABB2BF" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacingAndGlyphs" textLength="329.1667" x="679.1667" y="589.4236">Group Manager Rules</text><!--MD5=[8ab502f5efbcf7574955a573432ab6b8]
entity iRODS Service--><rect fill="#424856" height="86.377" style="stroke: #61AFEF; stroke-width: 3.125;" width="266.6667" x="1106.25" y="535.4167"/><rect fill="#424856" height="10.4167" style="stroke: #61AFEF; stroke-width: 3.125;" width="20.8333" x="1095.8333" y="545.8333"/><rect fill="#424856" height="10.4167" style="stroke: #61AFEF; stroke-width: 3.125;" width="20.8333" x="1095.8333" y="600.9603"/><text fill="#ABB2BF" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacingAndGlyphs" textLength="216.6667" x="1131.25" y="589.4236">iRODS Service</text><!--MD5=[feb5939ce823acf5a8245c3205b3c7a1]
entity Users--><rect fill="#424856" height="86.377" style="stroke: #61AFEF; stroke-width: 3.125;" width="137.5" x="1445.8333" y="535.4167"/><text fill="#ABB2BF" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacingAndGlyphs" textLength="87.5" x="1470.8333" y="589.4236">Users</text><!--MD5=[7a5d9a4033f8fec0fa3ff47525059faf]
entity Group Manager--><rect fill="#424856" height="86.377" style="stroke: #61AFEF; stroke-width: 3.125;" width="287.5" x="700" y="133.3333"/><rect fill="#424856" height="10.4167" style="stroke: #61AFEF; stroke-width: 3.125;" width="20.8333" x="689.5833" y="143.75"/><rect fill="#424856" height="10.4167" style="stroke: #61AFEF; stroke-width: 3.125;" width="20.8333" x="689.5833" y="198.877"/><text fill="#ABB2BF" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacingAndGlyphs" textLength="237.5" x="725" y="187.3403">Group Manager</text><path d="M1700,490.625 L1700,665.2995 L2045.8333,665.2995 L2045.8333,511.4583 L2025,490.625 L1700,490.625 " fill="#E5C07B" style="stroke: #282C34; stroke-width: 2.0833333333333335;"/><path d="M2025,490.625 L2025,511.4583 L2045.8333,511.4583 L2025,490.625 " fill="#E5C07B" style="stroke: #282C34; stroke-width: 2.0833333333333335;"/><text fill="#282C34" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacingAndGlyphs" textLength="279.1667" x="1716.6667" y="534.2153">External user can:</text><text fill="#282C34" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacingAndGlyphs" textLength="275" x="1716.6667" y="570.5922">- Activate account</text><text fill="#282C34" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacingAndGlyphs" textLength="293.75" x="1716.6667" y="606.9692">- Change password</text><text fill="#282C34" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacingAndGlyphs" textLength="266.6667" x="1716.6667" y="643.3462">- Reset password</text><path d="M611.4583,847.9167 L611.4583,927.0833 L537.625,935.4167 L611.4583,943.75 L611.4583,1022.5911 A0,0 0 0 0 611.4583,1022.5911 L1092.7083,1022.5911 A0,0 0 0 0 1092.7083,1022.5911 L1092.7083,868.75 L1071.875,847.9167 L611.4583,847.9167 A0,0 0 0 0 611.4583,847.9167 " fill="#E5C07B" style="stroke: #282C34; stroke-width: 2.0833333333333335;"/><path d="M1071.875,847.9167 L1071.875,868.75 L1092.7083,868.75 L1071.875,847.9167 " fill="#E5C07B" style="stroke: #282C34; stroke-width: 2.0833333333333335;"/><text fill="#282C34" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacingAndGlyphs" textLength="418.75" x="628.125" y="891.507">iRODS service account can:</text><text fill="#282C34" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacingAndGlyphs" textLength="429.1667" x="628.125" y="927.8839">- Authenticate external user</text><text fill="#282C34" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacingAndGlyphs" textLength="337.5" x="628.125" y="964.2609">- Create external user</text><text fill="#282C34" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacingAndGlyphs" textLength="333.3333" x="628.125" y="1000.6378">- Delete external user</text><!--MD5=[fc2c71aa2d4bb2c20cdd0d7e43ea6cdc]
entity SMTP--><ellipse cx="545.8333" cy="1635.4167" fill="#424856" rx="16.6667" ry="16.6667" style="stroke: #61AFEF; stroke-width: 4.166666666666667;"/><text fill="#ABB2BF" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacingAndGlyphs" textLength="85.4167" x="503.125" y="1704.007">SMTP</text><path d="M638.5417,1547.9167 L638.5417,1627.0833 L564.6667,1635.4167 L638.5417,1643.75 L638.5417,1722.5911 A0,0 0 0 0 638.5417,1722.5911 L1523.9583,1722.5911 A0,0 0 0 0 1523.9583,1722.5911 L1523.9583,1568.75 L1503.125,1547.9167 L638.5417,1547.9167 A0,0 0 0 0 638.5417,1547.9167 " fill="#E5C07B" style="stroke: #282C34; stroke-width: 2.0833333333333335;"/><path d="M1503.125,1547.9167 L1503.125,1568.75 L1523.9583,1568.75 L1503.125,1547.9167 " fill="#E5C07B" style="stroke: #282C34; stroke-width: 2.0833333333333335;"/><text fill="#282C34" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacingAndGlyphs" textLength="460.4167" x="655.2083" y="1591.507">External user webservice can:</text><text fill="#282C34" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacingAndGlyphs" textLength="527.0833" x="655.2083" y="1627.8839">- Send invitation mail to new users</text><text fill="#282C34" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacingAndGlyphs" textLength="668.75" x="655.2083" y="1664.2609">- Send password reset link to existing users</text><text fill="#282C34" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacingAndGlyphs" textLength="833.3333" x="655.2083" y="1700.6378">- Send user creation success status to group manager</text><!--MD5=[ef703612359e08237dc654ad40bb98bd]
link HTTP_UI to Webservice--><path d="M376.0625,597.25 C346.8125,650.5625 256.4375,815.2917 214.0417,892.5417 " fill="none" id="HTTP_UI-Webservice" style="stroke: #61AFEF; stroke-width: 2.0833333333333335;"/><text fill="#ABB2BF" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacingAndGlyphs" textLength="110.4167" x="300" y="772.757">provide</text><!--MD5=[0a2cf78a8c7601df10d7eb1b591f8410]
link HTTP_API to Webservice--><path d="M499.7083,935.4167 C462.1458,935.4167 375.9375,935.4167 304.2292,935.4167 " fill="none" id="HTTP_API-Webservice" style="stroke: #61AFEF; stroke-width: 2.0833333333333335;"/><text fill="#ABB2BF" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacingAndGlyphs" textLength="110.4167" x="346.875" y="916.507">provide</text><!--MD5=[bb714f82c05c67e6ee482b347b470044]
link Webservice to extusers--><path d="M199.4792,978.625 C212.8542,1049.1458 240.125,1192.9583 254.7708,1270.1458 " fill="none" id="Webservice-&gt;extusers" style="stroke: #61AFEF; stroke-width: 2.0833333333333335; stroke-dasharray: 7.0,7.0;"/><polygon fill="#61AFEF" points="256.8333,1281.0417,261.5405,1261.0704,254.8993,1270.8061,245.1636,1264.1649,256.8333,1281.0417" style="stroke: #61AFEF; stroke-width: 2.0833333333333335;"/><text fill="#ABB2BF" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacingAndGlyphs" textLength="54.1667" x="233.3333" y="1120.6736">use</text><!--MD5=[28a20e9d59b6b1da6b87da0c31f1e8bf]
link HTTP_UI to GMN12--><path d="M393.6875,559 C420.8125,499.4792 513.6042,319.5 657.2917,286.4583 C757.2292,263.4792 1480.2708,263.4792 1580.2083,286.4583 C1688.9167,311.4583 1773.5625,413.7083 1823.2708,490.125 " fill="none" id="HTTP_UI-GMN12" style="stroke: #61AFEF; stroke-width: 2.0833333333333335; stroke-dasharray: 7.0,7.0;"/><!--MD5=[afa1bb410d9eeb9d34b8498b8173152c]
link Group Manager Rules to HTTP_API--><path d="M797.125,621.1875 C741.1042,671.6042 645.8125,761.2083 575,847.9167 C559.6458,866.7083 544.6458,889.7917 534.0208,907.2083 " fill="none" id="Group Manager Rules-&gt;HTTP_API" style="stroke: #61AFEF; stroke-width: 2.0833333333333335; stroke-dasharray: 7.0,7.0;"/><polygon fill="#61AFEF" points="528.5625,916.25,545.3839,904.5006,533.9437,907.3309,531.1134,895.8907,528.5625,916.25" style="stroke: #61AFEF; stroke-width: 2.0833333333333335;"/><text fill="#ABB2BF" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacingAndGlyphs" textLength="54.1667" x="677.0833" y="772.757">use</text><!--MD5=[f9e4f8d66552670889cbeca897d87105]
link iRODS Service to HTTP_API--><path d="M1201,621.1042 C1168.9792,652.7292 1120.75,695.3125 1070.8333,720.8333 C969.5625,772.625 667.6042,781.8542 575,847.9167 C554.5208,862.5417 539.4583,887.1458 530.125,906.2083 " fill="none" id="iRODS Service-&gt;HTTP_API" style="stroke: #61AFEF; stroke-width: 2.0833333333333335; stroke-dasharray: 7.0,7.0;"/><polygon fill="#61AFEF" points="525.5208,916.125,540.9875,902.6421,529.9161,906.681,525.8772,895.6096,525.5208,916.125" style="stroke: #61AFEF; stroke-width: 2.0833333333333335;"/><text fill="#ABB2BF" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacingAndGlyphs" textLength="208.3333" x="1031.25" y="772.757">use (via PAM)</text><!--MD5=[714ab2c5e783171ff9f2db28bbb35e23]
link Group Manager to Group Manager Rules--><path d="M843.75,219.2083 C843.75,292.0833 843.75,443.7917 843.75,523.8958 " fill="none" id="Group Manager-&gt;Group Manager Rules" style="stroke: #61AFEF; stroke-width: 2.0833333333333335;"/><polygon fill="#61AFEF" points="843.75,535.1875,852.0833,516.4375,843.75,524.7708,835.4167,516.4375,843.75,535.1875" style="stroke: #61AFEF; stroke-width: 2.0833333333333335;"/><!--MD5=[611be7f837ff731b3fc2e139852813e4]
link Webservice to SMTP--><path d="M257.3333,978.125 C312.7083,1015.875 389.7292,1077.125 433.3333,1150 C525.2708,1303.6875 542.0833,1526.4792 545.1458,1604.8125 " fill="none" id="Webservice-&gt;SMTP" style="stroke: #61AFEF; stroke-width: 2.0833333333333335; stroke-dasharray: 7.0,7.0;"/><polygon fill="#61AFEF" points="545.5417,1616.1042,553.2802,1597.1009,545.2135,1605.6927,536.6218,1597.626,545.5417,1616.1042" style="stroke: #61AFEF; stroke-width: 2.0833333333333335;"/><text fill="#ABB2BF" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacingAndGlyphs" textLength="54.1667" x="537.5" y="1335.257">use</text><!--MD5=[dfd0bdbc42d27036000224274d9278db]
@startuml





skinparam backgroundColor #282c34

skinparam {
  ActivityBackgroundColor        #424856
  ActivityBarColor               #abb2bf
  ActivityBorderColor            #61afef

  ActivityDiamondBackgroundColor #424856
  ActivityDiamondBorderColor     #61afef

  ActivityEndColor               #e06c75

  ActivityStartColor             #98c379
  ActivityStopColor              #e06c75

  ActorBackgroundColor        #424856
  ActorBorderColor            #61afef

  ActorStereotypeFontColor    #abb2bf

  AgentBackgroundColor       #424856
  AgentBorderColor           #61afef

  ArrowColor #61afef

  ArtifactBackgroundColor     #424856
  ArtifactBorderColor         #61afef

  BackgroundColor #282c34

  BoundaryBackgroundColor     #424856
  BoundaryBorderColor         #61afef

  CardBackgroundColor     #424856
  CardBorderColor         #61afef

  ClassBackgroundColor   #424856
  ClassBorderColor       #abb2bf

  CloudBackgroundColor        #424856
  CloudBorderColor            #61afef

  CollectionsBackgroundColor #424856
  CollectionsBorderColor     #61afef

  ComponentBackgroundColor       #424856
  ComponentBorderColor           #61afef

  ControlBackgroundColor #424856
  ControlBorderColor     #61afef
  ControlFontColor       #abb2bf

  ControlStereotypeFontColor #abb2bf

  DatabaseBackgroundColor       #424856
  DatabaseBorderColor           #61afef

  DefaultFontColor #abb2bf
  DefaultFontSize 15

  DefaultFontName CMU Serif

  Dpi 200

  EntityBackgroundColor #424856
  EntityBorderColor     #61afef

  FileBackgroundColor #424856
  FileBorderColor     #61afef

  FolderBackgroundColor #424856
  FolderBorderColor     #61afef

  FrameBackgroundColor       #424856
  FrameBorderColor           #61afef

  HexagonBackgroundColor #424856
  HexagonBorderColor     #61afef

  InterfaceBackgroundColor       #424856
  InterfaceBorderColor           #61afef

  LegendBackgroundColor   #424856
  LegendBorderColor       #abb2bf

  NodeBackgroundColor       #424856
  NodeBorderColor           #61afef

  NoteBackgroundColor   #e5c07b
  NoteBorderColor       #282c34

  NoteFontColor         #282c34

  ObjectBackgroundColor       #424856
  ObjectBorderColor           #61afef

  PackageBackgroundColor       #282c34
  PackageBorderColor           #61afef

  Padding 2
  ParticipantBackgroundColor #424856
  ParticipantBorderColor     #61afef

  PartitionBackgroundColor transparent
  PartitionBorderColor     #abb2bf

  PersonBackgroundColor #424856
  PersonBorderColor     #61afef

  QueueBackgroundColor       #424856
  QueueBorderColor           #61afef

  RectangleBackgroundColor       #424856
  RectangleBorderColor           #61afef

  SequenceBoxBackgroundColor #424856
  SequenceBoxBorderColor     #61afef

  SequenceDividerBackgroundColor   #424856
  SequenceDividerBorderColor       #abb2bf

  SequenceGroupBackgroundColor       #424856

  SequenceGroupBorderColor           #abb2bf

  SequenceLifeLineBackgroundColor   #282c34
  SequenceLifeLineBorderColor       #61afef

  SequenceNewpageSeparatorColor  #abb2bf

  SequenceReferenceBackgroundColor        transparent
  SequenceReferenceBorderColor            #abb2bf

  SequenceReferenceHeaderBackgroundColor #424856

  Shadowing false

  StackBackgroundColor       #424856
  StackBorderColor           #61afef

  StateBackgroundColor    #424856
  StateBorderColor        #61afef
  StateEndColor           #e06c75

  StateStartColor         #98c379

  StorageBackgroundColor #424856
  StorageBorderColor     #abb2bf

  SwimlaneBorderColor            #abb2bf

  UsecaseBackgroundColor       #424856
  UsecaseBorderColor           #61afef
}


rectangle "External user server" {

    HTTP_UI  - - [Webservice] :provide
    HTTP_API - [Webservice] :provide

    database "PostgreSQL" {
        rectangle "External users" as extusers {
        }
    }

    [Webservice] .d.> extusers : use
}

note right of HTTP_UI
    External user can:
    - Activate account
    - Change password
    - Reset password
end note

note right of HTTP_API
    iRODS service account can:
    - Authenticate external user
    - Create external user
    - Delete external user
end note

rectangle "Yoda iRODS server" {
    [Group Manager Rules] .> HTTP_API : use
    [iRODS Service]       ..> HTTP_API : use (via PAM)
    database "iCAT" {
        rectangle "Users" {
        }
    }
}

rectangle "Yoda portal server" {
    [Group Manager] -d-> [Group Manager Rules]
}

[Webservice] ...> SMTP : use

note right of SMTP
    External user webservice can:
    - Send invitation mail to new users
    - Send password reset link to existing users
    - Send user creation success status to group manager
end note

@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.18+10-post-Debian-1deb11u1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>