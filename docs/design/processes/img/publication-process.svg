<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2179.1667px" preserveAspectRatio="none" style="width:2504px;height:2179px;background:#FFFFFF;" version="1.1" viewBox="0 0 2504 2179" width="2504.1667px" zoomAndPan="magnify"><defs/><g><!--MD5=[4eceffa65ab196036efea5ff835d3a15]
cluster Yoda instance--><rect fill="#FFFFFF" height="1835.4167" style="stroke:#000000;stroke-width:3.125;" width="1158.3333" x="160.4167" y="14.5833"/><text fill="#000000" font-family="CMU Serif" font-size="31.25" font-weight="bold" lengthAdjust="spacing" textLength="252.0833" x="613.5417" y="51.9236">Yoda instance</text><!--MD5=[63845d6d93e5503e57ef74beadaad5e6]
cluster iRODS ruleset--><rect fill="#FFFFFF" height="1685.4167" style="stroke:#000000;stroke-width:3.125;" width="1004.1667" x="264.5833" y="114.5833"/><text fill="#000000" font-family="CMU Serif" font-size="31.25" font-weight="bold" lengthAdjust="spacing" textLength="245.8333" x="643.75" y="151.9236">iRODS ruleset</text><!--MD5=[b32e50cb3351e610ef60ac416433296b]
cluster Yoda Public server--><rect fill="#FFFFFF" height="747.9167" style="stroke:#000000;stroke-width:3.125;" width="900" x="1368.75" y="1102.0833"/><text fill="#000000" font-family="CMU Serif" font-size="31.25" font-weight="bold" lengthAdjust="spacing" textLength="331.25" x="1653.125" y="1139.4236">Yoda Public server</text><!--MD5=[7df7a0848c50d26e70acfe9d086c4713]
cluster publicweb--><rect fill="#FFFFFF" height="235.4167" style="stroke:#000000;stroke-width:3.125;" width="460.4167" x="1441.6667" y="1218.75"/><text fill="#000000" font-family="CMU Serif" font-size="31.25" font-weight="bold" lengthAdjust="spacing" textLength="325" x="1509.375" y="1256.0903">Apache webserver</text><path d="M1450.3635,1605.9351 C1456.8856,1593.3135 1466.8249,1590.9449 1476.2591,1602.8619 C1485.1499,1587.0044 1494.9578,1588.029 1505.2871,1601.435 C1512.7862,1591.0067 1521.0496,1589.0377 1529.1701,1600.7652 C1533.417,1586.2716 1546.8769,1584.8372 1555.9272,1595.6955 C1565.2582,1584.7347 1573.5833,1584.5675 1582.7512,1595.8918 C1590.5717,1583.3074 1600.1152,1585.3365 1607.6681,1596.1765 C1615.3075,1583.4122 1624.4396,1584.8465 1631.9624,1596.2934 C1640.6794,1585.3684 1652.115,1584.1923 1659.4088,1597.8804 C1667.9757,1586.9966 1680.069,1586.8271 1685.0425,1601.4865 C1691.3342,1591.8088 1698.6869,1588.7114 1707.0171,1599.2732 C1717.154,1586.9002 1729.0959,1590.0961 1734.4033,1604.2576 C1750.6349,1591.5648 1767.5465,1595.6494 1772.9167,1616.6667 C1774.5629,1617.6065 1774.8129,1618.9998 1773.146,1620.1573 C1786.1824,1628.1838 1785.6617,1636.028 1774.5723,1645.4168 C1785.9452,1651.6849 1788.6598,1660.9726 1776.825,1669.4188 C1788.7839,1677.0403 1791.2663,1684.9059 1779.5603,1695.0527 C1791.9089,1702.5935 1789.8382,1714.6268 1778.4381,1721.1462 C1788.6604,1729.9019 1790.088,1737.3344 1777.1707,1744.853 C1790.8914,1763.6671 1783.0781,1783.3492 1758.3333,1783.3333 C1760.8702,1782.902 1762.4432,1783.804 1761.9618,1786.6624 C1753.7417,1797.7435 1743.0647,1797.7058 1735.5292,1785.8727 C1728.7899,1800.5663 1716.5575,1798.9075 1708.3359,1787.4118 C1700.5248,1797.0347 1692.8063,1798.0055 1685.2111,1787.1677 C1678.8946,1800.3168 1668.1112,1800.9028 1660.0003,1788.9716 C1653.3053,1804.2164 1641.1844,1802.823 1632.3769,1791.1385 C1623.9145,1805.8199 1614.3654,1804.6103 1605.0587,1791.9832 C1596.0275,1802.6023 1585.1281,1802.5876 1579.8818,1788.1762 C1571.7882,1800.8748 1563.0712,1800.7024 1553.6022,1789.7013 C1546.5527,1799.6603 1536.8443,1799.0785 1531.7009,1787.7411 C1523.3756,1799.7033 1514.8221,1800.0397 1504.9061,1789.6478 C1493.6341,1800.7336 1484.8421,1797.3294 1478.1462,1784.5224 C1458.5167,1799.8789 1439.6429,1795.1231 1435.4167,1768.75 C1436.8828,1768.668 1437.2738,1769.7106 1436.6337,1770.8496 C1422.1276,1767.6 1418.8753,1755.8976 1430.5073,1746.1617 C1416.9503,1741.4551 1416.4006,1729.8408 1427.0849,1721.7374 C1414.7436,1716.7666 1409.5283,1705.7057 1421.5968,1695.608 C1408.777,1686.5351 1411.5021,1675.8331 1424.8975,1670.1604 C1414.2835,1658.705 1418.4684,1645.9188 1434.2696,1643.8853 C1417.8205,1625.1587 1425.0478,1605.2303 1450,1602.0833 C1451.9893,1603.1308 1452.0624,1604.5396 1450.3635,1605.9351 " fill="#FFFFFF" style="stroke:#000000;stroke-width:3.125;"/><path d="M1874.4193,1602.6148 C1883.6227,1591.6444 1891.5972,1593.6823 1898.4116,1605.1673 C1905.1966,1590.6748 1917.115,1589.7617 1926.1352,1602.9268 C1930.5806,1588.7449 1941.7167,1588.5686 1951.2809,1597.3122 C1960.2124,1585.082 1971.122,1585.1897 1979.5301,1597.9048 C1987.5356,1584.0849 1999.2621,1584.5397 2006.558,1598.5929 C2012.5398,1583.4959 2020.472,1581.6657 2032.4292,1592.6702 C2041.9531,1582.9184 2053.6886,1581.4888 2058.7667,1597.2583 C2067.9288,1584.6341 2077.2684,1582.9821 2086.4834,1597.2038 C2094.9927,1586.786 2104.4312,1588.6538 2109.6223,1600.6321 C2117.997,1587.9682 2126.5787,1587.8471 2136.0856,1599.3944 C2146.1046,1586.2642 2157.1355,1588.8573 2163.6732,1602.9255 C2180.6682,1591.6664 2197.6784,1592.7333 2202.0833,1616.6667 C2204.1067,1614.9604 2205.7052,1615.9875 2206.2048,1618.2493 C2218.3311,1624.7686 2218.8203,1634.2554 2208.7657,1643.0638 C2223.4025,1648.3889 2224.2493,1660.5308 2211.4794,1668.7512 C2226.4147,1676.8148 2226.2145,1685.0731 2213.7242,1695.4432 C2226.9725,1705.3151 2223.9957,1716.1884 2209.722,1721.8964 C2222.4271,1730.4834 2219.3615,1742.9553 2205.9088,1747.6726 C2216.7967,1767.4333 2211.7163,1781.6941 2187.5,1783.3333 C2189.0478,1783.7543 2189.5784,1784.5635 2188.5226,1785.9876 C2181.3606,1797.6523 2169.7459,1799.5176 2161.5526,1787.1447 C2154.8003,1796.5584 2144.3989,1798.5797 2138.2178,1786.5237 C2133.2861,1804.0355 2118.5036,1803.8829 2108.6048,1791.433 C2101.1116,1801.814 2092.9852,1803.0807 2085.7342,1791.1843 C2079.4519,1804.6266 2066.0748,1804.6953 2058.0151,1793.1565 C2051.3069,1805.0388 2041.2643,1806.335 2033.4961,1794.2405 C2024.0218,1808.78 2011.9512,1810.6072 2002.8725,1793.8534 C1994.9798,1803.4342 1984.1467,1800.5648 1979.9844,1789.6811 C1973.9939,1803.6707 1961.5296,1803.0712 1953.1309,1792.292 C1944.3563,1807.9401 1930.8747,1803.8333 1923.8169,1790.5523 C1915.8583,1799.2698 1904.9381,1798.7446 1901.3178,1786.0037 C1879.8844,1803.5673 1861.0113,1794.735 1856.25,1768.75 C1857.488,1768.4408 1857.9627,1768.9114 1857.8369,1770.149 C1847.3787,1763.8567 1845.0013,1754.0767 1857.2892,1747.2405 C1844.29,1738.6447 1842.4349,1729.6325 1854.2299,1718.4061 C1840.7489,1711.9886 1841.5873,1703.3863 1850.9598,1693.9171 C1841.1712,1685.4235 1841.1905,1676.17 1853.6506,1670.2007 C1843.6349,1660.611 1842.9314,1650.3637 1857.2538,1644.1388 C1840.3175,1623.0461 1845.5317,1609.5377 1870.8333,1602.0833 C1872.0451,1600.5348 1873.6861,1600.9344 1874.4193,1602.6148 " fill="#FFFFFF" style="stroke:#000000;stroke-width:3.125;"/><!--MD5=[5d6b613d1fa3a81284910875927d385a]
cluster DataCite Metadata Store--><rect fill="#FFFFFF" height="202.0833" style="stroke:#000000;stroke-width:3.125;" width="495.8333" x="1512.5" y="1964.5833"/><text fill="#000000" font-family="CMU Serif" font-size="31.25" font-weight="bold" lengthAdjust="spacing" textLength="454.1667" x="1533.3333" y="2001.9236">DataCite Metadata Store</text><!--MD5=[064d849e3c0545719beb6579e133a117]
entity approved--><ellipse cx="212.5" cy="251.0417" fill="#FEFECE" rx="16.6667" ry="16.6667" style="stroke:#A80036;stroke-width:3.125;"/><text fill="#000000" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacing" textLength="400" x="12.5" y="319.632">Approved for publication</text><!--MD5=[d259662ced3c6e6fe70b3fee77b7eb45]
entity published--><ellipse cx="212.5" cy="1713.5417" fill="#FEFECE" rx="16.6667" ry="16.6667" style="stroke:#A80036;stroke-width:3.125;"/><text fill="#000000" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacing" textLength="156.25" x="134.375" y="1782.132">Published</text><!--MD5=[0a7038c1f24bb8e7dfdcf45fa28c9e1c]
entity Generate Yoda DOI--><rect fill="#FEFECE" height="107.2103" style="stroke:#A80036;stroke-width:3.125;" width="395.8333" x="654.1667" y="197.9167"/><rect fill="#FEFECE" height="20.8333" style="stroke:#A80036;stroke-width:3.125;" width="31.25" x="1008.3333" y="208.3333"/><rect fill="#FEFECE" height="4.1667" style="stroke:#A80036;stroke-width:3.125;" width="8.3333" x="1004.1667" y="212.5"/><rect fill="#FEFECE" height="4.1667" style="stroke:#A80036;stroke-width:3.125;" width="8.3333" x="1004.1667" y="220.8333"/><text fill="#000000" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacing" textLength="304.1667" x="689.5833" y="272.757">Generate Yoda DOI</text><!--MD5=[a6cc90b0b38d214415f04588c566e1e6]
entity Generate DataCite JSON--><rect fill="#FEFECE" height="107.2103" style="stroke:#A80036;stroke-width:3.125;" width="483.3333" x="297.9167" y="431.25"/><rect fill="#FEFECE" height="20.8333" style="stroke:#A80036;stroke-width:3.125;" width="31.25" x="739.5833" y="441.6667"/><rect fill="#FEFECE" height="4.1667" style="stroke:#A80036;stroke-width:3.125;" width="8.3333" x="735.4167" y="445.8333"/><rect fill="#FEFECE" height="4.1667" style="stroke:#A80036;stroke-width:3.125;" width="8.3333" x="735.4167" y="454.1667"/><text fill="#000000" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacing" textLength="391.6667" x="333.3333" y="506.0903">Generate DataCite JSON</text><!--MD5=[25a7a48d019197d62a9e8ff1692e88d6]
entity Send DataCite JSON--><rect fill="#FEFECE" height="107.2103" style="stroke:#A80036;stroke-width:3.125;" width="412.5" x="735.4167" y="664.5833"/><rect fill="#FEFECE" height="20.8333" style="stroke:#A80036;stroke-width:3.125;" width="31.25" x="1106.25" y="675"/><rect fill="#FEFECE" height="4.1667" style="stroke:#A80036;stroke-width:3.125;" width="8.3333" x="1102.0833" y="679.1667"/><rect fill="#FEFECE" height="4.1667" style="stroke:#A80036;stroke-width:3.125;" width="8.3333" x="1102.0833" y="687.5"/><text fill="#000000" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacing" textLength="320.8333" x="770.8333" y="739.4236">Send DataCite JSON</text><!--MD5=[dbc0120f161e010ef186e8de3ecc1f00]
entity Create landingpage HTML--><rect fill="#FEFECE" height="107.2103" style="stroke:#A80036;stroke-width:3.125;" width="508.3333" x="727.0833" y="897.9167"/><rect fill="#FEFECE" height="20.8333" style="stroke:#A80036;stroke-width:3.125;" width="31.25" x="1193.75" y="908.3333"/><rect fill="#FEFECE" height="4.1667" style="stroke:#A80036;stroke-width:3.125;" width="8.3333" x="1189.5833" y="912.5"/><rect fill="#FEFECE" height="4.1667" style="stroke:#A80036;stroke-width:3.125;" width="8.3333" x="1189.5833" y="920.8333"/><text fill="#000000" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacing" textLength="416.6667" x="762.5" y="972.757">Create landingpage HTML</text><!--MD5=[801bfb9bb4b8dd6c4e4483927d08229c]
entity Send Yoda metadata JSON--><rect fill="#FEFECE" height="107.2103" style="stroke:#A80036;stroke-width:3.125;" width="506.25" x="728.125" y="1308.3333"/><rect fill="#FEFECE" height="20.8333" style="stroke:#A80036;stroke-width:3.125;" width="31.25" x="1192.7083" y="1318.75"/><rect fill="#FEFECE" height="4.1667" style="stroke:#A80036;stroke-width:3.125;" width="8.3333" x="1188.5417" y="1322.9167"/><rect fill="#FEFECE" height="4.1667" style="stroke:#A80036;stroke-width:3.125;" width="8.3333" x="1188.5417" y="1331.25"/><text fill="#000000" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacing" textLength="414.5833" x="763.5417" y="1383.1736">Send Yoda metadata JSON</text><!--MD5=[9c21ab29f46de86a09a4ce57aa7c73fd]
entity Mint Yoda DOI--><rect fill="#FEFECE" height="107.2103" style="stroke:#A80036;stroke-width:3.125;" width="322.9167" x="819.7917" y="1660.4167"/><rect fill="#FEFECE" height="20.8333" style="stroke:#A80036;stroke-width:3.125;" width="31.25" x="1101.0417" y="1670.8333"/><rect fill="#FEFECE" height="4.1667" style="stroke:#A80036;stroke-width:3.125;" width="8.3333" x="1096.875" y="1675"/><rect fill="#FEFECE" height="4.1667" style="stroke:#A80036;stroke-width:3.125;" width="8.3333" x="1096.875" y="1683.3333"/><text fill="#000000" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacing" textLength="231.25" x="855.2083" y="1735.257">Mint Yoda DOI</text><!--MD5=[b27731515e05e33f410b05c4ad713ee8]
entity moai--><rect fill="#FFFFFF" height="86.377" style="stroke:#000000;stroke-width:3.125;" width="318.75" x="1492.7083" y="1318.75"/><text fill="#000000" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacing" textLength="268.75" x="1517.7083" y="1372.757">OAI-PMH service</text><!--MD5=[764574e42a07803230dfdd9c044e1965]
entity JSON storage--><rect fill="#FEFECE" height="107.2103" style="stroke:#A80036;stroke-width:3.125;" width="302.0833" x="1453.125" y="1660.4167"/><rect fill="#FEFECE" height="20.8333" style="stroke:#A80036;stroke-width:3.125;" width="31.25" x="1713.5417" y="1670.8333"/><rect fill="#FEFECE" height="4.1667" style="stroke:#A80036;stroke-width:3.125;" width="8.3333" x="1709.375" y="1675"/><rect fill="#FEFECE" height="4.1667" style="stroke:#A80036;stroke-width:3.125;" width="8.3333" x="1709.375" y="1683.3333"/><text fill="#000000" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacing" textLength="210.4167" x="1488.5417" y="1735.257">JSON storage</text><!--MD5=[0a38338cb3118604b8edc8355f0a690b]
entity Landingpages--><rect fill="#FEFECE" height="107.2103" style="stroke:#A80036;stroke-width:3.125;" width="312.5" x="1872.9167" y="1660.4167"/><rect fill="#FEFECE" height="20.8333" style="stroke:#A80036;stroke-width:3.125;" width="31.25" x="2143.75" y="1670.8333"/><rect fill="#FEFECE" height="4.1667" style="stroke:#A80036;stroke-width:3.125;" width="8.3333" x="2139.5833" y="1675"/><rect fill="#FEFECE" height="4.1667" style="stroke:#A80036;stroke-width:3.125;" width="8.3333" x="2139.5833" y="1683.3333"/><text fill="#000000" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacing" textLength="220.8333" x="1908.3333" y="1735.257">Landingpages</text><!--MD5=[ede1afeccd952c20161980a2dbc9c627]
entity dataciteapi--><rect fill="#FFFFFF" height="86.377" style="stroke:#000000;stroke-width:3.125;" width="306.25" x="1607.2917" y="2047.9167"/><text fill="#000000" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacing" textLength="256.25" x="1632.2917" y="2101.9236">DataCite API v2</text><!--MD5=[4166a9dfc8d8ada274fe67d3aee2faaf]
link Generate Yoda DOI to Generate DataCite JSON--><path d="M781.9521,304.5542 C733.3,340.2333 668.45,387.7896 618.0729,424.7333 " fill="none" id="Generate Yoda DOI-to-Generate DataCite JSON" style="stroke:#A80036;stroke-width:2.0833333333333335;"/><polygon fill="#A80036" points="609.4813,431.0333,629.5296,426.6662,617.8816,424.8737,619.6741,413.2257,609.4813,431.0333" style="stroke:#A80036;stroke-width:2.0833333333333335;"/><!--MD5=[679d5a127ba50e1f3440be610a2345d2]
link Generate DataCite JSON to Send DataCite JSON--><path d="M629.8188,537.8875 C692.9354,573.8604 777.2396,621.9104 842.2813,658.9813 " fill="none" id="Generate DataCite JSON-to-Send DataCite JSON" style="stroke:#A80036;stroke-width:2.0833333333333335;"/><polygon fill="#A80036" points="851.7333,664.3667,839.5689,647.8429,842.6831,659.2091,831.3169,662.3233,851.7333,664.3667" style="stroke:#A80036;stroke-width:2.0833333333333335;"/><!--MD5=[277f2dede21cfd811109c39d2748c51e]
link Send DataCite JSON to Create landingpage HTML--><path d="M950.55,771.2208 C956.4583,805.425 964.2521,850.5458 970.5083,886.7667 " fill="none" id="Send DataCite JSON-to-Create landingpage HTML" style="stroke:#A80036;stroke-width:2.0833333333333335;"/><polygon fill="#A80036" points="972.3958,897.7,977.4147,877.8048,970.6221,887.4355,960.9915,880.6428,972.3958,897.7" style="stroke:#A80036;stroke-width:2.0833333333333335;"/><!--MD5=[39450cb6f5bf73a37f914d650c1cb44b]
link Send DataCite JSON to Generate Yoda DOI--><path d="M931.6938,664.1333 C915.0833,578.3771 881.8208,406.6542 864.0021,314.6583 " fill="none" id="Send DataCite JSON-to-Generate Yoda DOI" style="stroke:#A80036;stroke-width:2.0833333333333335;"/><polygon fill="#A80036" points="862.0125,304.3875,857.3993,324.3806,863.9947,314.6138,873.7615,321.2092,862.0125,304.3875" style="stroke:#A80036;stroke-width:2.0833333333333335;"/><text fill="#000000" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacing" textLength="295.8333" x="914.5833" y="495.6736">DOI already exists</text><!--MD5=[7f6d18d3e6b0365a0a9a07fd0a89f380]
link Create landingpage HTML to Send Yoda metadata JSON--><path d="M981.25,1004.5771 C981.25,1079.1583 981.25,1217.1229 981.25,1297.2667 " fill="none" id="Create landingpage HTML-to-Send Yoda metadata JSON" style="stroke:#A80036;stroke-width:2.0833333333333335;"/><polygon fill="#A80036" points="981.25,1307.7,989.5833,1288.95,981.25,1297.2833,972.9167,1288.95,981.25,1307.7" style="stroke:#A80036;stroke-width:2.0833333333333335;"/><!--MD5=[96aaa938a3d9c6eaf65fceb7469b3ab6]
link Send Yoda metadata JSON to Mint Yoda DOI--><path d="M981.25,1414.8771 C981.25,1477.0604 981.25,1581.7729 981.25,1648.6917 " fill="none" id="Send Yoda metadata JSON-to-Mint Yoda DOI" style="stroke:#A80036;stroke-width:2.0833333333333335;"/><polygon fill="#A80036" points="981.25,1659.9104,989.5833,1641.1604,981.25,1649.4938,972.9167,1641.1604,981.25,1659.9104" style="stroke:#A80036;stroke-width:2.0833333333333335;"/><!--MD5=[a83bfb376b9b75badcfef9b571760af2]
link approved to Generate Yoda DOI--><path d="M231.6415,251.0417 C292.6363,251.0417 487.5333,251.0417 642.8,251.0417 " fill="none" id="approved-to-Generate Yoda DOI" style="stroke:#A80036;stroke-width:2.0833333333333335;"/><polygon fill="#A80036" points="653.9083,251.0417,635.1583,242.7083,643.4917,251.0417,635.1583,259.375,653.9083,251.0417" style="stroke:#A80036;stroke-width:2.0833333333333335;"/><text fill="#000000" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacing" textLength="337.5" x="273.9583" y="232.132">Wait for delayed rule</text><!--MD5=[dc93c38537a238254e0b1051054889c5]
link Mint Yoda DOI to published--><path d="M819.45,1713.5417 C631.9771,1713.5417 336.725,1713.5417 242.4696,1713.5417 " fill="none" id="Mint Yoda DOI-to-published" style="stroke:#A80036;stroke-width:2.0833333333333335;"/><polygon fill="#A80036" points="231.5029,1713.5417,250.2529,1721.875,241.9196,1713.5417,250.2529,1705.2083,231.5029,1713.5417" style="stroke:#A80036;stroke-width:2.0833333333333335;"/><text fill="#000000" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacing" textLength="427.0833" x="311.9792" y="1694.632">Datapackage state change</text><!--MD5=[ccbe97d80830775891bfb1ec96623535]
link publicweb to Landingpages--><path d="M1902.208,1412.3082 C1902.3716,1412.7 1902.5365,1413.0929 1902.7025,1413.4869 C1903.0346,1414.2749 1903.3716,1415.0673 1903.7135,1415.8636 C1904.3972,1417.4561 1905.1006,1419.0644 1905.8235,1420.6853 C1907.2694,1423.927 1908.7939,1427.219 1910.3974,1430.5361 C1913.6044,1437.1702 1917.1278,1443.9046 1920.9717,1450.5373 C1928.6595,1463.8029 1937.6297,1476.662 1947.9167,1487.5 C1958.1958,1498.3292 1968.0604,1492.2708 1977.0833,1504.1667 C1994.25,1526.8 2009.5125,1596.5083 2019.0083,1648.8875 " fill="none" id="publicweb-to-Landingpages" style="stroke:#A80036;stroke-width:2.0833333333333335;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="2020.9458,1659.7792,2025.8665,1639.8595,2019.1215,1649.5235,2009.4575,1642.7785,2020.9458,1659.7792" style="stroke:#A80036;stroke-width:2.0833333333333335;"/><!--MD5=[57b4037553bbbc4a84d4834e5c47cb2a]
link moai to JSON storage--><path d="M1628.4125,1404.4458 C1614.0417,1431.7083 1597.0708,1468.8854 1589.5833,1504.1667 C1579.4083,1552.1125 1584.1396,1607.5521 1590.8229,1649.025 " fill="none" id="moai-to-JSON storage" style="stroke:#A80036;stroke-width:2.0833333333333335;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="1592.6521,1659.7938,1597.7289,1639.9133,1590.9082,1649.5241,1581.2974,1642.7034,1592.6521,1659.7938" style="stroke:#A80036;stroke-width:2.0833333333333335;"/><text fill="#000000" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacing" textLength="366.6667" x="1595.8333" y="1539.4236">Update MOAI database</text><!--MD5=[0721b781fd19f6679f7c5061d9690b9e]
link Create landingpage HTML to Landingpages--><path d="M1235.7042,956.3542 C1479.4688,965.0333 1823.8854,993.7604 1918.75,1085.4167 C2074.3813,1235.7854 2056.3813,1523.0875 2039.4292,1649.3375 " fill="none" id="Create landingpage HTML-to-Landingpages" style="stroke:#A80036;stroke-width:2.0833333333333335;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="2037.9021,1660.3208,2048.7379,1642.897,2039.3365,1650.0034,2032.23,1640.6019,2037.9021,1660.3208" style="stroke:#A80036;stroke-width:2.0833333333333335;"/><text fill="#000000" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacing" textLength="62.5" x="2058.3333" y="1372.757">SCP</text><!--MD5=[6d4be5f96e56a8e04bc76fe7e0178988]
link Send Yoda metadata JSON to JSON storage--><path d="M1073.1625,1414.8771 C1187.9458,1478.9875 1383.6688,1588.3042 1502.7292,1654.8021 " fill="none" id="Send Yoda metadata JSON-to-JSON storage" style="stroke:#A80036;stroke-width:2.0833333333333335;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="1511.8771,1659.9104,1499.5714,1643.4916,1502.783,1654.8307,1491.4439,1658.0422,1511.8771,1659.9104" style="stroke:#A80036;stroke-width:2.0833333333333335;"/><text fill="#000000" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacing" textLength="62.5" x="1318.75" y="1539.4236">SCP</text><!--MD5=[09479c48239b3f90d2842b75ace103ed]
link Send DataCite JSON to dataciteapi--><path d="M1148.5542,731.8 C1545.4896,757.6229 2375,826.2646 2375,948.9583 C2375,948.9583 2375,948.9583 2375,1715.625 C2375,1926.9188 2106.2104,2021.8398 1924.1479,2061.8996 " fill="none" id="Send DataCite JSON-to-dataciteapi" style="stroke:#A80036;stroke-width:2.0833333333333335;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="1913.9167,2064.1131,1934.0047,2068.2938,1924.0979,2061.9108,1930.4809,2052.0039,1913.9167,2064.1131" style="stroke:#A80036;stroke-width:2.0833333333333335;"/><text fill="#000000" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacing" textLength="102.0833" x="2381.25" y="1372.757">HTTPS</text><!--MD5=[a0b5d34ac93787ff55ffd5d0dbd202b9]
link Mint Yoda DOI to dataciteapi--><path d="M1087.9563,1766.6958 C1240.8938,1839.8917 1520.0167,1973.4833 1665.9,2043.305 " fill="none" id="Mint Yoda DOI-to-dataciteapi" style="stroke:#A80036;stroke-width:2.0833333333333335;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="1675.3125,2047.8104,1661.9973,2032.1991,1665.9165,2043.3135,1654.8022,2047.2327,1675.3125,2047.8104" style="stroke:#A80036;stroke-width:2.0833333333333335;"/><text fill="#000000" font-family="CMU Serif" font-size="31.25" lengthAdjust="spacing" textLength="102.0833" x="1425" y="1918.5903">HTTPS</text><!--MD5=[e9999e80f7fc9b4ee46c19074d1be7d2]
@startuml
skinparam defaultFontName CMU Serif
skinparam defaultFontSize 15
skinparam padding 2
skinparam shadowing false
skinparam dpi 200

rectangle "Yoda instance" {
    rectangle "iRODS ruleset" {
        [Generate Yoda DOI] - -> [Generate DataCite JSON]
        [Generate DataCite JSON] - -> [Send DataCite JSON]
        [Send DataCite JSON] - -> [Create landingpage HTML]
        [Send DataCite JSON] - -> [Generate Yoda DOI] : DOI already exists
        [Create landingpage HTML] - -> [Send Yoda metadata JSON]
        [Send Yoda metadata JSON] -d-> [Mint Yoda DOI]
    }

interface "Approved for publication" as approved
interface "Published" as published

approved -r-> [Generate Yoda DOI] : Wait for delayed rule
[Mint Yoda DOI] -r-> published : Datapackage state change
}

rectangle "Yoda Public server" {
    rectangle "Apache webserver" as publicweb {
        rectangle "OAI-PMH service" as moai {
        }
    }

    cloud {
      [JSON storage]
    }

    cloud {
      [Landingpages]
    }

    publicweb .d.> [Landingpages]
    moai .d.> [JSON storage] : Update MOAI database
}

rectangle "DataCite Metadata Store" {
    rectangle "DataCite API v2" as dataciteapi {
    }
}

[Create landingpage HTML] ..> [Landingpages] : SCP
[Send Yoda metadata JSON] ..> [JSON storage] : SCP

[Send DataCite JSON] ..> dataciteapi : HTTPS
[Mint Yoda DOI] ..> dataciteapi : HTTPS
@enduml

PlantUML version 1.2022.1beta4(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>