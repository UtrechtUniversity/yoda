

<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  <link rel="stylesheet" href="/yoda/assets/css/just-the-docs-default.css">
  
  <link rel="stylesheet" href="/yoda/assets/css/just-the-docs-head-nav.css">
  
  <style id="jtd-nav-activation">
  

.site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.external) > .nav-list-link,
.site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.external) > .nav-list > .nav-list-item:not(:nth-child(2)) > .nav-list-link,
.site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.external) > .nav-list > .nav-list-item > .nav-list > .nav-list-item > .nav-list-link {
  background-image: none;
}

.site-nav > .nav-list:not(:nth-child(1):not(.nav-category-list)) .nav-list-link,
.site-nav .nav-list-link.external {
  background-image: none;
}

.site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.external):nth-child(5) > .nav-list > .nav-list-item:nth-child(2) > .nav-list-link {
  font-weight: 600;
  text-decoration: none;
}

.site-nav > .nav-category-list > .nav-list-item > .nav-list-expander svg,
.site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:nth-child(5) > .nav-list-expander svg,
.site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:nth-child(5) > .nav-list > .nav-list-item:nth-child(2) > .nav-list-expander svg {
  transform: rotate(-90deg);
}

.site-nav > .nav-category-list > .nav-list-item > .nav-list,
.site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:nth-child(5) > .nav-list,
.site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:nth-child(5) > .nav-list > .nav-list-item:nth-child(2) > .nav-list {
  display: block;
}
  </style>

  

  
    <script src="/yoda/assets/js/vendor/lunr.min.js"></script>
  

  <script src="/yoda/assets/js/just-the-docs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  

  <link rel="icon" href="/yoda/favicon.ico" type="image/x-icon">



  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Running Yoda using Docker Compose | Yoda</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="Running Yoda using Docker Compose" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="On this website you can find release notes and technical documentation on software design and administration tasks of Yoda" />
<meta property="og:description" content="On this website you can find release notes and technical documentation on software design and administration tasks of Yoda" />
<meta property="og:site_name" content="Yoda" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Running Yoda using Docker Compose" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"On this website you can find release notes and technical documentation on software design and administration tasks of Yoda","headline":"Running Yoda using Docker Compose","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/yoda/yoda.svg"}},"url":"/yoda/development/docker-setup.html"}</script>
<!-- End Jekyll SEO tag -->


  

</head>

<body>
  <a class="skip-to-main" href="#main-content">Skip to main content</a>
  <svg xmlns="http://www.w3.org/2000/svg" class="d-none">
  <symbol id="svg-link" viewBox="0 0 24 24">
  <title>Link</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link">
    <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
  </svg>
</symbol>

  <symbol id="svg-menu" viewBox="0 0 24 24">
  <title>Menu</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
    <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
  </svg>
</symbol>

  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
  <title>Expand</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right">
    <polyline points="9 18 15 12 9 6"></polyline>
  </svg>
</symbol>

  <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE -->
<symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link">
  <title id="svg-external-link-title">(external link)</title>
  <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line>
</symbol>

  
    <symbol id="svg-doc" viewBox="0 0 24 24">
  <title>Document</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
    <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>
  </svg>
</symbol>

    <symbol id="svg-search" viewBox="0 0 24 24">
  <title>Search</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
    <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
  </svg>
</symbol>

  
  
    <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md -->
<symbol id="svg-copy" viewBox="0 0 16 16">
  <title>Copy</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
    <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
    <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
  </svg>
</symbol>
<symbol id="svg-copied" viewBox="0 0 16 16">
  <title>Copied</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16">
    <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/>
    <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/>
  </svg>
</symbol>

  
</svg>

  <div class="side-bar">
  <div class="site-header" role="banner">
    <a href="/yoda/" class="site-title lh-tight">
  <div class="site-logo" role="img" aria-label="Yoda"></div>

</a>
    <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false">
      <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg>
    </button>
  </div>

  <nav aria-label="Main" id="site-nav" class="site-nav">
  
  
    <ul class="nav-list"><li class="nav-list-item"><a href="/yoda/" class="nav-list-link">Home</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Release Notes category" aria-pressed="false">
      <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg>
    </button><a href="/yoda/release-notes/" class="nav-list-link">Release Notes</a><ul class="nav-list"><li class="nav-list-item"><a href="/yoda/release-notes/release-1.9.html" class="nav-list-link">v1.9</a></li><li class="nav-list-item"><a href="/yoda/release-notes/release-1.8.html" class="nav-list-link">v1.8</a></li><li class="nav-list-item"><a href="/yoda/release-notes/release-1.7.html" class="nav-list-link">v1.7</a></li><li class="nav-list-item"><a href="/yoda/release-notes/release-1.6.html" class="nav-list-link">v1.6</a></li><li class="nav-list-item"><a href="/yoda/release-notes/release-1.5.html" class="nav-list-link">v1.5</a></li><li class="nav-list-item"><a href="/yoda/release-notes/release-1.4.html" class="nav-list-link">v1.4</a></li><li class="nav-list-item"><a href="/yoda/release-notes/release-1.3.html" class="nav-list-link">v1.3</a></li><li class="nav-list-item"><a href="/yoda/release-notes/release-1.2.html" class="nav-list-link">v1.2</a></li><li class="nav-list-item"><a href="/yoda/release-notes/release-1.1.html" class="nav-list-link">v1.1</a></li><li class="nav-list-item"><a href="/yoda/release-notes/release-1.0.html" class="nav-list-link">v1.0</a></li><li class="nav-list-item"><a href="/yoda/release-notes/release-0.9.7.html" class="nav-list-link">v0.9.7</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Software Design category" aria-pressed="false">
      <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg>
    </button><a href="/yoda/design/" class="nav-list-link">Software Design</a><ul class="nav-list"><li class="nav-list-item"><a href="/yoda/design/api/" class="nav-list-link">API</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in System Overview category" aria-pressed="false">
            <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg>
          </button><a href="/yoda/design/overview/" class="nav-list-link">System Overview</a><ul class="nav-list"><li class="nav-list-item">
                <a href="/yoda/design/overview/research-space.html" class="nav-list-link">Research space</a>
              </li><li class="nav-list-item">
                <a href="/yoda/design/overview/vault-space.html" class="nav-list-link">Vault space</a>
              </li><li class="nav-list-item">
                <a href="/yoda/design/overview/group-manager.html" class="nav-list-link">Group manager</a>
              </li><li class="nav-list-item">
                <a href="/yoda/design/overview/statistics.html" class="nav-list-link">Statistics module</a>
              </li><li class="nav-list-item">
                <a href="/yoda/design/overview/deposit-space.html" class="nav-list-link">Deposit space</a>
              </li><li class="nav-list-item">
                <a href="/yoda/design/overview/statistics_1.8.html" class="nav-list-link">Statistics module (v1.8 or earlier)</a>
              </li><li class="nav-list-item">
                <a href="/yoda/design/overview/theme-packages.html" class="nav-list-link">Theme packaging</a>
              </li><li class="nav-list-item">
                <a href="/yoda/design/overview/intake.html" class="nav-list-link">Intake module</a>
              </li><li class="nav-list-item">
                <a href="/yoda/design/overview/vault-archive.html" class="nav-list-link">Vault archive</a>
              </li><li class="nav-list-item">
                <a href="/yoda/design/overview/data-requests.html" class="nav-list-link">Data requests module</a>
              </li><li class="nav-list-item">
                <a href="/yoda/design/overview/authentication.html" class="nav-list-link">Authentication</a>
              </li><li class="nav-list-item">
                <a href="/yoda/design/overview/data_package_reference.html" class="nav-list-link">Data Package Reference</a>
              </li><li class="nav-list-item">
                <a href="/yoda/design/overview/deployment.html" class="nav-list-link">Deployment</a>
              </li><li class="nav-list-item">
                <a href="/yoda/design/overview/external-user-service.html" class="nav-list-link">External User Service</a>
              </li><li class="nav-list-item">
                <a href="/yoda/design/overview/yoda-moai.html" class="nav-list-link">Yoda MOAI service</a>
              </li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Metadata category" aria-pressed="false">
            <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg>
          </button><a href="/yoda/design/metadata/" class="nav-list-link">Metadata</a><ul class="nav-list"><li class="nav-list-item">
                <a href="/yoda/design/metadata/adr-schema-identifiers.html" class="nav-list-link">Architectural decision record schema identifier format</a>
              </li><li class="nav-list-item">
                <a href="/yoda/design/metadata/metadata-form-json.html" class="nav-list-link">Metadata JSON schema</a>
              </li><li class="nav-list-item">
                <a href="/yoda/design/metadata/metadata-form.html" class="nav-list-link">Metadata form implementation</a>
              </li><li class="nav-list-item">
                <a href="/yoda/design/metadata/schema-configuration.html" class="nav-list-link">Metadata schemas</a>
              </li><li class="nav-list-item">
                <a href="/yoda/design/metadata/metadata-vault.html" class="nav-list-link">Metadata vault</a>
              </li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Processes category" aria-pressed="false">
            <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg>
          </button><a href="/yoda/design/processes/" class="nav-list-link">Processes</a><ul class="nav-list"><li class="nav-list-item">
                <a href="/yoda/design/processes/async-system-execution.html" class="nav-list-link">Asynchronous and Privileged Execution</a>
              </li><li class="nav-list-item">
                <a href="/yoda/design/processes/asynchronous-processes.html" class="nav-list-link">Asynchronous processes</a>
              </li><li class="nav-list-item">
                <a href="/yoda/design/processes/automatic-resource-balancing.html" class="nav-list-link">Automatic Resource Balancing</a>
              </li><li class="nav-list-item">
                <a href="/yoda/design/processes/locking-mechanism.html" class="nav-list-link">Folder Locking mechanism</a>
              </li><li class="nav-list-item">
                <a href="/yoda/design/processes/publication-process.html" class="nav-list-link">Publication Process</a>
              </li><li class="nav-list-item">
                <a href="/yoda/design/processes/revisions.html" class="nav-list-link">Revision management</a>
              </li><li class="nav-list-item">
                <a href="/yoda/design/processes/vault-process.html" class="nav-list-link">To vault process in research module</a>
              </li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Administration Tasks category" aria-pressed="false">
      <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg>
    </button><a href="/yoda/administration/" class="nav-list-link">Administration Tasks</a><ul class="nav-list"><li class="nav-list-item"><a href="/yoda/administration/configuring-yoda.html" class="nav-list-link">Configuring Yoda</a></li><li class="nav-list-item"><a href="/yoda/administration/deploying-yoda.html" class="nav-list-link">Deploying Yoda</a></li><li class="nav-list-item"><a href="/yoda/administration/hotfixing-ruleset.html" class="nav-list-link">Hotfixing ruleset</a></li><li class="nav-list-item"><a href="/yoda/administration/local-ruleset-patch.html" class="nav-list-link">Local ruleset patches</a></li><li class="nav-list-item"><a href="/yoda/administration/installing-licenses.html" class="nav-list-link">Installing Licenses</a></li><li class="nav-list-item"><a href="/yoda/administration/installing-terms.html" class="nav-list-link">Installing Terms & Conditions</a></li><li class="nav-list-item"><a href="/yoda/administration/installing-preservable-file-formats.html" class="nav-list-link">Installing lists of preservable file formats</a></li><li class="nav-list-item"><a href="/yoda/administration/installing-metadata-schemas.html" class="nav-list-link">Installing metadata schemas</a></li><li class="nav-list-item"><a href="/yoda/administration/local-postfix-mta.html" class="nav-list-link">Local Postfix MTA</a></li><li class="nav-list-item"><a href="/yoda/administration/installing-datarequest-module.html" class="nav-list-link">Installing datarequest module</a></li><li class="nav-list-item"><a href="/yoda/administration/upgrading-metadata-schemas.html" class="nav-list-link">Upgrading metadata schemas</a></li><li class="nav-list-item"><a href="/yoda/administration/troubleshooting-publication.html" class="nav-list-link">Troubleshooting publication</a></li><li class="nav-list-item"><a href="/yoda/administration/using-python-irodsclient.html" class="nav-list-link">Using the python-irodsclient API</a></li><li class="nav-list-item"><a href="/yoda/administration/troubleshooting-email.html" class="nav-list-link">Troubleshooting email</a></li><li class="nav-list-item"><a href="/yoda/administration/upgrading-postgresql.html" class="nav-list-link">Upgrading PostgreSQL</a></li><li class="nav-list-item"><a href="/yoda/administration/configuring-openidc.html" class="nav-list-link">Configuring OIDC</a></li><li class="nav-list-item"><a href="/yoda/administration/troubleshooting-replication-revisions.html" class="nav-list-link">Troubleshooting replication and revision creation</a></li><li class="nav-list-item"><a href="/yoda/administration/configuring-cleanup-temporary-files.html" class="nav-list-link">Configuring cleanup functionality temporary files</a></li><li class="nav-list-item"><a href="/yoda/administration/configuring-data-access-passwords.html" class="nav-list-link">Configuring Data Access Passwords</a></li><li class="nav-list-item"><a href="/yoda/administration/restore-collection.html" class="nav-list-link">Restore collection</a></li><li class="nav-list-item"><a href="/yoda/administration/setting-job-flags.html" class="nav-list-link">Setting job flags</a></li><li class="nav-list-item"><a href="/yoda/administration/supported-distributions.html" class="nav-list-link">Supported distributions</a></li><li class="nav-list-item"><a href="/yoda/administration/deprovision-users.html" class="nav-list-link">Deprovision users</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Development category" aria-pressed="false">
      <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg>
    </button><a href="/yoda/development/" class="nav-list-link">Development</a><ul class="nav-list"><li class="nav-list-item"><a href="/yoda/development/setting-up-development-environment.html" class="nav-list-link">Setting up development environment</a></li><li class="nav-list-item"><a href="/yoda/development/docker-setup.html" class="nav-list-link">Running Yoda using Docker Compose</a></li><li class="nav-list-item"><a href="/yoda/development/running-api-ui-tests.html" class="nav-list-link">Running API and UI tests</a></li><li class="nav-list-item"><a href="/yoda/development/yodadrive-development-environment.html" class="nav-list-link">Setting up YodaDrive development environment</a></li><li class="nav-list-item"><a href="/yoda/development/mock_tape_archive.html" class="nav-list-link">Mock tape archive</a></li><li class="nav-list-item"><a href="/yoda/development/development-tips.html" class="nav-list-link">Development tips</a></li><li class="nav-list-item"><a href="/yoda/development/wall-of-fame.html" class="nav-list-link">Wall of Fame</a></li><li class="nav-list-item"><a href="/yoda/development/running-unit-integration-tests.html" class="nav-list-link">Running unit and integration tests</a></li></ul></li></ul>

  
</nav>


  
  
    <footer class="site-footer">&copy; 2017-2023 <a href="https://www.uu.nl/" title="Utrecht University website">Utrecht University</a></footer>

  
</div>

  <div class="main" id="top">
    <div id="main-header" class="main-header">
  
    

<div class="search" role="search">
  <div class="search-input-wrap">
    <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Yoda" aria-label="Search Yoda" autocomplete="off">
    <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label>
  </div>
  <div id="search-results" class="search-results"></div>
</div>

  
  
  
    <nav aria-label="Auxiliary" class="aux-nav">
  <ul class="aux-nav-list">
    
      <li class="aux-nav-list-item">
        <a href="https://github.com/UtrechtUniversity/yoda" class="site-button"
          
        >
          Yoda on GitHub
        </a>
      </li>
    
  </ul>
</nav>

  
</div>

    <div class="main-content-wrap">
      <nav aria-label="Breadcrumb" class="breadcrumb-nav">
  <ol class="breadcrumb-nav-list">
  
    <li class="breadcrumb-nav-list-item"><a href="/yoda/development/">Development</a></li>
  <li class="breadcrumb-nav-list-item"><span>Running Yoda using Docker Compose</span></li>
  </ol>
</nav>
      <div id="main-content" class="main-content">
        <main>
          
            <h1 id="running-yoda-using-docker-compose">
  
  
    <a href="#running-yoda-using-docker-compose" class="anchor-heading" aria-labelledby="running-yoda-using-docker-compose"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Running Yoda using Docker Compose
  
  
</h1>
    

<p>Docker Compose configurations for running Yoda are available in the
<code class="language-plaintext highlighter-rouge">/docker</code> directory.</p>
<h2 id="intended-use-and-limitations">
  
  
    <a href="#intended-use-and-limitations" class="anchor-heading" aria-labelledby="intended-use-and-limitations"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Intended use and limitations
  
  
</h2>
    

<p>These configurations are intended for local development and testing.</p>

<p>Some components are not (yet) available in the containerized Yoda setup,
most importantly:</p>
<ul>
  <li>OpenSearch (used for searching in the deposit module)</li>
  <li>The containerized version does not actually deliver emails sent by Yoda. 
Instead, it has <a href="https://github.com/axllent/mailpit">Mailpit</a> for testing email
delivery. Mailpit provides a web interface that can be used to view email messages
that would have been delivered by the application in a production configuration.</li>
  <li>The Docker Compose configurations only have an iRODS provider; there is no consumer
for data replication.</li>
</ul>
<h2 id="prerequisites">
  
  
    <a href="#prerequisites" class="anchor-heading" aria-labelledby="prerequisites"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Prerequisites
  
  
</h2>
    

<p>Running the containerized Yoda setup requires Docker. The Yoda Docker Compose
configurations may not work on older versions of Docker / Docker Compose. Docker
20.10.x and newer is known to work.</p>

<p>For generic Docker installation instructions, see e.g.
<a href="https://docs.docker.com/engine/install/">the Docker Engine installation docs</a>.
MacOS users can <a href="https://github.com/abiosoft/colima">install Colima and Docker</a> using
<a href="https://brew.sh">Homebrew</a>.</p>
<h2 id="starting-the-application">
  
  
    <a href="#starting-the-application" class="anchor-heading" aria-labelledby="starting-the-application"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Starting the application
  
  
</h2>
    

<p>If you haven’t downloaded the Docker images yet, pull them first:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>docker/compose
docker-compose pull
</code></pre></div></div>

<p>Yoda has two Docker Compose configurations:</p>
<ol>
  <li>The regular configuration. This is the most portable and fastest configuration.</li>
  <li>A configuration with bind mounts for the application source code. This configuration enables
editing the Yoda source code without having to work in the container, so that you can use your
host system IDE, editor, as well as other tools. However, bind mounts can be tricky to get working on
some container runtimes / host operating systems, and they can slow down the application
significantly in some setups.</li>
</ol>

<p>In general, it is recommended to use the regular configuration, unless you need the bind mounts.</p>

<p>Start the regular configuration by running the start script in the <code class="language-plaintext highlighter-rouge">docker/compose</code> directory:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>../up.sh
</code></pre></div></div>

<p>Start the configuration with bind mounts by running the start script in the <code class="language-plaintext highlighter-rouge">docker/compose-with-bind-mounts</code>
directory:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ../compose-with-bind-mounts
../up.sh
</code></pre></div></div>

<p>Removing and old instance of the application (including data):</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>../down.sh <span class="nt">-v</span>

<span class="c"># And in the configuration with bind mounts:</span>
./clean.sh
</code></pre></div></div>

<p>You need to have these entries in your /etc/hosts (or equivalent) file:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Docker setup Yoda
127.0.0.1 portal.yoda eus.yoda data.yoda public.yoda
</code></pre></div></div>

<p>After the application is started, the web interfaces will be available on:</p>
<ul>
  <li>Mailpit: http://localhost:8025</li>
  <li>Portal: https://portal.yoda:8443</li>
  <li>EUS (port with API enabled): https://eus.yoda:8444</li>
  <li>DavRODS: https://data.yoda:8445</li>
  <li>Public: https://public.yoda:8446</li>
</ul>

<p>You can log in on the Yoda portal using any of the test account credentials, such as user name <code class="language-plaintext highlighter-rouge">researcher</code>
and password <code class="language-plaintext highlighter-rouge">test</code>. A full list of test account credentials can be found in the
<a href="https://github.com/UtrechtUniversity/yoda/blob/development/roles/yoda_test/defaults/main.yml">test_users list in the defaults file of the Yoda test role</a>.</p>
<h2 id="jobs">
  
  
    <a href="#jobs" class="anchor-heading" aria-labelledby="jobs"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Jobs
  
  
</h2>
    

<p>Yoda uses jobs for various processes, such as creating revisions, archiving data in the vault, collecting
statistics data, and processing data package publication changes. These jobs need to be started manually
in the Docker Setup.</p>

<p>The <code class="language-plaintext highlighter-rouge">run-cronjob.sh</code> shell script can be used as a convenient way to start jobs.</p>

<p>For example, to asynchronously create revisions, run:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./run-cronjob.sh revision
</code></pre></div></div>

<p>After accepting a data package for archiving in the vault, run:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./run-cronjob.sh copytovault
</code></pre></div></div>

<p>After accepting a data package for publication, run:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./run-cronjob.sh publication
./run-cronjob.sh moaiupdate
</code></pre></div></div>

<p>If you want to view the statistics, first run the statistics job:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./run-cronjob.sh statistics
</code></pre></div></div>
<h2 id="troubleshooting">
  
  
    <a href="#troubleshooting" class="anchor-heading" aria-labelledby="troubleshooting"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Troubleshooting
  
  
</h2>
    
<h3 id="cannot-create-container-for-service---conflict">
  
  
    <a href="#cannot-create-container-for-service---conflict" class="anchor-heading" aria-labelledby="cannot-create-container-for-service---conflict"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Cannot create container for service […] : Conflict
  
  
</h3>
    

<p>The Docker setup currently has static container names so that we can easily
start jobs on containers, etc. This can however cause conflicts after, for example, the
container runtime has crashed.</p>

<p>If you don’t have any other Docker containers running on your system, the easy way to
resolve such conflicts is to just stop and remove all containers:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker <span class="nb">kill</span> <span class="si">$(</span>docker ps <span class="nt">-q</span><span class="si">)</span>
docker <span class="nb">rm</span> <span class="si">$(</span>docker ps <span class="nt">-a</span> <span class="nt">-q</span><span class="si">)</span>
</code></pre></div></div>
<h3 id="error-bind-mount-owned-by-root-user-cannot-change-application-uid">
  
  
    <a href="#error-bind-mount-owned-by-root-user-cannot-change-application-uid" class="anchor-heading" aria-labelledby="error-bind-mount-owned-by-root-user-cannot-change-application-uid"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Error: bind mount owned by root user. Cannot change application UID
  
  
</h3>
    

<p>Multiple situations can cause failures when preparing to change the application UID to match the host system user:</p>
<ol>
  <li>One of the bind mount directories (<code class="language-plaintext highlighter-rouge">docker/compose-with-bind-mounts/v_*</code>) is owned by the root user, rather than a regular user.
In this case: use <code class="language-plaintext highlighter-rouge">chown</code> to change ownership of this directory on the host system.</li>
  <li>One of the bind mount directories (<code class="language-plaintext highlighter-rouge">docker/compose-with-bind-mounts/v_*</code>) is not present on the host system, which
causes it to default to root permissions. In this case, the directory needs to be re-created with a <code class="language-plaintext highlighter-rouge">.docker.gitkeep</code> dummy file.</li>
  <li>There is some kind of problem on the host system (e.g. SELinux denial, permission problem related to user mapping, etc.) that causes Docker
to do something unexpected related to the bind mounts. Checking the host system logs for any clues could be a first step for troubleshooting
in such a case.</li>
</ol>
<h2 id="building-the-images">
  
  
    <a href="#building-the-images" class="anchor-heading" aria-labelledby="building-the-images"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Building the images
  
  
</h2>
    

<p>Building a new image is only needed for development purposes. If you want to test
an existing Dockerized version of Yoda, you can pull the images from the registry
instead.</p>
<h3 id="yoda-provider">
  
  
    <a href="#yoda-provider" class="anchor-heading" aria-labelledby="yoda-provider"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Yoda provider
  
  
</h3>
    

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>docker/images/yoda_irods_icat
./stage-uploads.sh
./build.sh
</code></pre></div></div>
<h3 id="mailpit">
  
  
    <a href="#mailpit" class="anchor-heading" aria-labelledby="mailpit"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Mailpit
  
  
</h3>
    

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>docker/images/mailpit
./build.sh
</code></pre></div></div>
<h3 id="yoda-portal">
  
  
    <a href="#yoda-portal" class="anchor-heading" aria-labelledby="yoda-portal"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Yoda portal
  
  
</h3>
    

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>docker/images/yoda_portal
./build.sh
</code></pre></div></div>
<h3 id="davrods">
  
  
    <a href="#davrods" class="anchor-heading" aria-labelledby="davrods"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> DavRODS
  
  
</h3>
    

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>docker/images/davrods
./build.sh
</code></pre></div></div>
<h3 id="external-user-service">
  
  
    <a href="#external-user-service" class="anchor-heading" aria-labelledby="external-user-service"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> External user service
  
  
</h3>
    

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>docker/images/yoda_eus
./build.sh
</code></pre></div></div>
<h3 id="public">
  
  
    <a href="#public" class="anchor-heading" aria-labelledby="public"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Public
  
  
</h3>
    

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>docker/images/yoda_public
./stage-uploads.sh
./build.sh
</code></pre></div></div>
<h3 id="yoda-web-mock">
  
  
    <a href="#yoda-web-mock" class="anchor-heading" aria-labelledby="yoda-web-mock"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Yoda web mock
  
  
</h3>
    

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>docker/images/yoda_web_mock
./build.sh
</code></pre></div></div>

          

          
        </main>
        

  <hr>
  <footer>
    

    <p class="text-small text-grey-dk-100 mb-0">Licensed under <a href="https://github.com/UtrechtUniversity/yoda/blob/development/LICENSE">GPLv3</a>.</p>

    
      <div class="d-flex mt-2">
        
        
          <p class="text-small text-grey-dk-000 mb-0">
            <a href="https://github.com/UtrechtUniversity/yoda/tree/development/docs/development/docker-setup.md" id="edit-this-page">Edit this page on GitHub.</a>
          </p>
        
      </div>
    
  </footer>


      </div>
    </div>
    
      

<div class="search-overlay"></div>

    
  </div>

  
</body>
</html>

