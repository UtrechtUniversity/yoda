<!DOCTYPE html>
<html lang="en">
    <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <link rel="icon" href="/yoda/assets/images/favicon.ico">

  <title>Release notes Yoda version 0.9.7 (August 2017)</title>

  <link rel='stylesheet' id='bootstrap-css'  href='//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css' type='text/css' media='all' />
  <link rel="stylesheet" href="/yoda/assets/css/style.css" type="text/css" media="screen" />
  <link rel="stylesheet" href="/yoda/assets/css/custom.css" type="text/css" media="screen" />
  <link rel="stylesheet" href="/yoda/assets/css/print.css" type="text/css" media="print" />
</head>

    <body data-rsssl="1" class="page-template-default page page-id-6 page-parent" data-spy="scroll" data-target="#sidebarnav">
        <div id="page">

            <div id="brandbar" class="affix-top">
    <div class="container">
        <div class="row">
            <div class="col-sm-4 col-xs-8 logodiv">
                <button type="button" class="navbar-toggle hidden-print" data-toggle="collapse" data-target="#main-menu-collapse">
                    <span class="sr-only">Navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a href="https://www.uu.nl/en">
                    <img src="/yoda/assets/images/uu-logo.svg" alt="Logo Utrecht University">
                </a>

                <div class="visible-print-block">
                    <h1>YODA</h1>
                </div>
            </div>

            <div class="col-sm-6 col-xs-4 hidden-print" role="search">
                <!--
                <div class="pull-right">
                    <form method="get" id="searchform" action="https://yoda.sites.uu.nl">
                        <div class="search-wrapper">
                            <label class="screen-reader-text" for="s">'</label>
                            <input type="text" class="searchfield" value="" name="s" id="s" placeholder="Search the Site...">
                            <input type="submit" id="searchsubmit" class="searchbutton" value="">
                        </div>
                    </form>
                </div>
                -->
            </div>
        </div>
    </div>
</div>
<header id="masthead" class="header hidden-print">
    <div class="container">
        <h1>
            <a href="/yoda" rel="home" title="YODA">
                YODA
            </a>
        </h1>
    </div>
</header>

<a class="skip-link sr-only" href="#content">Skip to content</a>

<!-- MAIN MENU -->
<nav id="#access" class="navbar navbar-default navbar-inverse">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="container">
        <div class="navbar-header"></div>
        <div id="main-menu-collapse" class="collapse navbar-collapse">
            <ul id="menu-hoofdmenu" class="nav navbar-nav">
                
                <li class="first-item menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                    
                    <a title="Release notes" href="/yoda/release-notes/index.html">Release notes</a>
                    
                </li>
                
                <li class="first-item menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                    
                    <a title="Administration" href="/yoda/administration/index.html">Administration</a>
                    
                </li>
                
                <li class="first-item menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                    
                    <a title="Development" href="/yoda/development/index.html">Development</a>
                    
                </li>
                
                <li class="first-item menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children dropdown">
                    
                    <a title="Software design" href="/yoda/design/index.html">Software design</a>
                    
                </li>
                
            </ul>
        </div>
    </div>
</nav>
<!-- /MAIN MENU -->


            <div id="content" class="two-col">
                <header class="article-header article-header-main">
                    <div class="header-image hidden-print">

                        
                        <div class="breadcrumbs" xmlns:v="https://rdf.data-vocabulary.org/#">
                            <div class="container">
							<span property="itemListElement" typeof="ListItem">
								<span property="name">YODA</span>
								<meta property="position" content="1">
							</span>
                            </div>
                        </div>
                        

                        <img src="/yoda/assets/images/header.jpg" alt="">

                        
                        <div class="page-header-placeholder"></div>
                        
                    </div>
                </header>

                <div id="content-wrapper" class="container">
                    <div class="row-offcanvas row-offcanvas-left">
                        <div id="left-sidebar" class="sidebar-offcanvas clearfix hidden-print" role="complementary">
                            <!-- PAGE MENU -->
                            
                            
                            
                            <div class="widget-1 first-widget widget widget_nav_menu">
                                <h4 class="widgettitle">Menu</h4>
                                <div class="menu-hoofdmenu-container">
                                    <!-- PAGE MENU -->
                                    <ul class="menu">
                                        
                                        
                                            
                                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                                                <a href="/yoda/release-notes/release-1.5.html">Release 1.5</a>
                                            </li>
                                        
                                            
                                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                                                <a href="/yoda/release-notes/release-1.4.html">Release 1.4</a>
                                            </li>
                                        
                                            
                                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                                                <a href="/yoda/release-notes/release-1.3.html">Release 1.3</a>
                                            </li>
                                        
                                            
                                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                                                <a href="/yoda/release-notes/release-1.2.html">Release 1.2</a>
                                            </li>
                                        
                                            
                                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                                                <a href="/yoda/release-notes/release-1.1.html">Release 1.1</a>
                                            </li>
                                        
                                            
                                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                                                <a href="/yoda/release-notes/release-1.0.html">Release 1.0</a>
                                            </li>
                                        
                                            
                                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children current-menu-item">
                                                <a href="/yoda/release-notes/release-0.9.7.html">Release 0.9.7</a>
                                            </li>
                                        
                                    </ul>
                                </div>
                            </div>
                            
                            <!-- /PAGE MENU -->    
                        </div>

                        <div class="page-content clearfix">
                            
                            <div class="page-title">
                                <h1>
                                    Release notes Yoda version 0.9.7 (August 2017)
                                </h1>
                            </div>
                            
			    <!--
                            <div class="toggle-btn-div visible-xs clearfix">
                                <button type="button" class="toggle-btn white button icon left arrow-right" data-toggle="offcanvas">
                                    Show sidebar
                                </button>
                            </div>
                            -->
                            <div class="page-content-inner facetwp-template">

                                <article id="post-6" class="clearfix post-6 page type-page status-publish hentry first-post">
                                    <section class="entry-content">
                                        <h1 id="release-notes-yoda-version-097-august-2017">Release notes Yoda version 0.9.7 (August 2017)</h1>

<p>Version: 0.9.7</p>

<p>Released: August 2017</p>

<h2 id="whats-new-in-yoda-version-097">What’s new in Yoda version 0.9.7</h2>
<h3 id="features">Features</h3>
<ul>
  <li>Folders in the research area can be secured in the vault</li>
  <li>A datamanager per category can approve packages for the vault and control
read access within the vault</li>
  <li>File modifications can be reverted with the help of revisions</li>
  <li>Rules to restore a collection in mass</li>
  <li>Introduction of the statistics module</li>
  <li>Integration of the youth intake module</li>
</ul>

<h2 id="upgrading-from-yoda-version-096">Upgrading from Yoda version 0.9.6</h2>
<p>Install the 0.9.7 version of at least irods-ruleset-uu and
irods-ruleset-research.</p>

<p>Install the latest version of implementation specific rulesets;
irods-ruleset-youth-cohort or irods-ruleset-i-lab for example</p>

<p>Run the following migration scripts as rodsadmin to enable new features:</p>

<p><em>/etc/irods/irods-ruleset-uu/tools/createSystemCollections.r</em>
    This script creates system collections that are needed for metadata
    schema’s and revisions. To enabe revisions run it as follows:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>irule <span class="nt">-F</span> createSystemCollections.r <span class="s2">"*enableRevisions=1"</span>
</code></pre></div></div>

<p><em>/etc/irods/irods-ruleset-uu/set-vault-permissions.r</em>
    This scripts makes the vault collections belonging to a research group
    visible and allows a datamanager to manage read-only access.</p>

<p><em>/etc/irods/irods-ruleset-research/tools/migrate-locks.r</em>
    The locking mechanism and folder statuses have changed. This script will
    migrate these to the new situation.</p>

<p><em>/etc/irods/irods-ruleset-research/tools/create-revision-stores.r</em>
    Existing research groups do not have a revision store. This script will
    create one and will create an initial revision for every data object found.
    This could be a long running process.</p>

<p><em>/etc/irods/irods-ruleset-research/tools/install-default-xml-for-metadata.r</em>
    Only run this script when the default metadata schema hasn’t been installed
    yet. If the main resource is not named “irodsResc” or if you don’t want to
    use the “ilab” schema then adapt this call:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>irule <span class="nt">-F</span> install-default-xml-for-metadata.r <span class="s1">'*resc="irodsResc"'</span> <span class="s1">'*src="/etc/irods/irods-ruleset-research/tools/xml"'</span> <span class="s1">'*default="ilab"'</span>
</code></pre></div></div>

<p>Update the portal by pulling in the 0.9.7 version of the yoda-portal,
yoda-portal-group-manager, yoda-portal-research, yoda-portal-statistics and if
applicable the youth intake portal module.</p>

<p>Copy the cronjobs cronjon-revision-cleanup.sh and
copy-accepted-folders-to-vault.r to /var/lib/irods/.irods and add them to the
crontab like the example below.</p>

<pre><code class="language-crontab">0,5,10,15,20,25,30,35,40,45,50,55 * * *    * /bin/irule -F $HOME/.irods/job_movetovault.r &gt;&gt;$HOME/iRODS/server/log/job_movetovault.log 2&gt; /dev/null
0 0 * *    * /bin/sh $HOME/.irods/cronjob-revision-cleanup.sh &gt;&gt; $HOME/iRODS/server/log/cronjob-revision-cleanup.log 2&gt; /dev/null
*/2 * *    * *    /bin/irule -F $HOME/.irods/copy-accepted-folders-to-vault.r &gt;&gt; $HOME/iRODS/server/log/copy-accepted-folders-to-vault.log
</code></pre>
<p>To workaround a memory leak in the irodsReServer iRODS needs to be restarted
regularly. The restartifirodsisidle.sh script from the irods-ruleset-uu/tools
directory is meant to restart iRODS only if no jobs are running. It could be
included in a cronjob or invoked by monit using irodsReServer.monit also found
in the irods-ruleset-uu/tools directory.</p>

<h2 id="known-issues">Known Issues</h2>

<ol>
  <li>
    <p>With the research ruleset loaded we see occasional glibc level errors in
the logs. They have no noticeable impact on the user.</p>
  </li>
  <li>
    <p>The iRODS server will get slower over time due to a memory leak. A
workaround is suggested above in the upgrade section.</p>
  </li>
  <li>
    <p>When storage data is available, different tiers are assigned, and all
resources are then reset to the same tier, the statistics module may show a
blank page.</p>
  </li>
</ol>

                                    </section>

                                    <footer class="article-footer"></footer>
                                </article>
                            </div> <!-- /page-content-inner -->
                        </div> <!-- /page-content -->
                    </div> <!--row-offcanvas -->
                </div> <!-- /#content-wrapper -->
            </div>

            <footer id="colophon" class="footer hidden-print">
                <div id="inner-footer" class="container clearfix">
                    <div class="row">
                        <div class="col-sm-6">
                            <img alt="Logo Utrecht University" src="/yoda/assets/images/uu-logo-footer.svg">
                        </div>
                        <div class="col-sm-6">
                            <p class="source-org copyright pull-right">© 2019 Utrecht University, <a href="https://www.uu.nl/en/organisation/contact/disclaimer">disclaimer</a></p>
                        </div>
                    </div>
                </div>
            </footer>

            <p id="back-top" style="display: none;">
                <a href="#top"><i class="fa fa-angle-up"></i></a>
            </p>

            <script type="text/javascript" src='/yoda/assets/js/jquery.js'></script>
<script type="text/javascript" src='/yoda/assets/js/bootstrap.min.js'></script>
        </div>
    </body>
</html>
